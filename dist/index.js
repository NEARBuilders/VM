!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var r="object"==typeof exports?t(require("react")):t(e.React);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(global,e=>(()=>{"use strict";var t,r,n,i,o={764:function(e,t,r){var n;let i=r(238),o=r(665),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l;t.INSPECT_MAX_BYTES=50;l.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!l.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return f(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!l.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|g(e,t),n=s(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){let t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);let i=function(e){if(l.isBuffer(e)){let t=0|p(e.length),r=s(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(void 0!==e.length)return"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(e){return u(e),s(e<0?0:0|p(e))}l.alloc=function(e,t,r){var n,i,o;return n=e,i=t,o=r,(u(n),n<=0)?s(n):void 0!==i?"string"==typeof o?s(n).fill(i,o):s(n).fill(i):s(n)},l.allocUnsafe=function(e){return f(e)},l.allocUnsafeSlow=function(e){return f(e)};function h(e){let t=e.length<0?0:0|p(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),l.prototype),n}function p(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+"7fffffff bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:R(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0))return"";for(!e&&(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=L[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return function(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),function(e){return e!=e}(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)return i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r);return b(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,s/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else -1!==n&&(o-=o-n),n=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return -1}l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(q(t,Uint8Array))i+t.length>n.length?(!l.isBuffer(t)&&(t=l.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(l.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,a=r-t,s=Math.min(o,a),c=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)};l.prototype.write=function(e,t,r,n){var i,o,a,s,l,c,u,f,h,d,p,g,m,v,y,b;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let w=this.length-t;if((void 0===r||r>w)&&(r=w),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");!n&&(n="utf8");let E=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(function(e){return e!=e}(n))break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":;return i=this,o=e,a=t,s=r,M(R(o,i.length-a),i,a,s);case"ascii":case"latin1":case"binary":;return l=this,c=e,u=t,f=r,M(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(c),l,u,f);case"base64":;return h=this,d=e,p=t,g=r,M(j(d),h,p,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":;return m=this,v=e,y=t,b=r,M(function(e,t){let r,n,i;let o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(v,m.length-y),m,y,b);default:if(E)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),E=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(o=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],(192&r)==128&&(192&n)==128&&(192&s)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function E(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function S(e,t,r,n,i,o){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function k(e,t,r,n,i){B(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function x(e,t,r,n,i){B(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function _(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,n,i){return t=+t,r>>>=0,!i&&_(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,i){return t=+t,r>>>=0,!i&&_(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,!r&&E(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,!r&&E(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,!t&&E(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,!t&&E(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,!t&&E(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,!t&&E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,!t&&E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&P(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),l.prototype.readBigUInt64BE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&P(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,!r&&E(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,!r&&E(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return(e>>>=0,!t&&E(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,!t&&E(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,!t&&E(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,!t&&E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,!t&&E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&P(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),l.prototype.readBigInt64BE=D(function(e){T(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&P(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,!t&&E(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,!t&&E(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,!t&&E(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,!t&&E(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;S(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;S(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=D(function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=D(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);S(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);S(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,!r&&S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=D(function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=D(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw TypeError("argument should be a Buffer");if(!r&&(r=0),!n&&0!==n&&(n=this.length),t>=e.length&&(t=e.length),!t&&(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,!e&&(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=l.isBuffer(e)?e:l.from(e,n),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};let N={};function A(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function O(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}A("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),A("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),A("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=O(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=O(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);function B(e,t,r,n,i,o){var a,s,l;if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new N.ERR_OUT_OF_RANGE("value",n,e)}a=n,s=i,l=o,T(s,"offset"),(void 0===a[s]||void 0===a[s+l])&&P(s,a.length-(l+1))}function T(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function P(e,t,r){if(Math.floor(e)!==e)throw T(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}let U=/[^+/0-9A-Za-z-_]/g;function R(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function j(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}let L=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function D(e){return"undefined"==typeof BigInt?$:e}function $(){throw Error("BigInt not supported")}},238:function(e){e.exports=require("base64-js")},665:function(e){e.exports=require("ieee754")},169:function(t){t.exports=e}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,s),r.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};s.r(l),s.d(l,{useAccountId:()=>eQ,Widget:()=>r4,CommitButton:()=>tV,useNear:()=>eJ,useCache:()=>tw,utils:()=>c,useInitNear:()=>eL,EthersProviderContext:()=>t5,useAccount:()=>eZ});var c={};s.r(c),s.d(c,{ErrorFallback:()=>R,ErrorScopes:()=>P,Loading:()=>U,MaxGasPerTransaction:()=>N,OneNear:()=>B,ReactKey:()=>eh,StorageCostPerByte:()=>A,TGas:()=>C,availableNearBalance:()=>H,bigMax:()=>G,bigMin:()=>J,bigToString:()=>V,computeSrcOrCode:()=>ev,computeWritePermission:()=>eu,convertToStringLeaves:()=>ei,dateToString:()=>W,deepCopy:()=>ep,deepEqual:()=>em,deepFreeze:()=>ef,displayGas:()=>z,displayNear:()=>K,displayTime:()=>X,estimateDataSize:()=>ee,extractKeys:()=>et,filterValues:()=>eg,indexMatch:()=>el,ipfsUpload:()=>Z,ipfsUrl:()=>Q,isArray:()=>q,isFunction:()=>D,isObject:()=>F,isReactObject:()=>ed,isString:()=>L,isValidAccountId:()=>j,isoDate:()=>Y,keysToCamel:()=>$,patternMatch:()=>es,removeDuplicates:()=>er});var u=s("169"),f=s.n(u),h=require("@swc/helpers/_/_async_to_generator"),d=require("@swc/helpers/_/_sliced_to_array"),p=require("@swc/helpers/_/_ts_generator"),g=require("react-singleton-hook"),m=require("@swc/helpers/_/_object_spread"),v=require("@swc/helpers/_/_object_spread_props"),y=require("near-api-js"),b=require("big.js"),w=s.n(b),E=require("deep-equal"),S=s.n(E),k=require("ethers"),x=require("bn.js"),_=s.n(x),I=s(764).Buffer,C=w()(10).pow(12),N=C.mul(250),A=w()(10).pow(19),O=/^(([a-z\d]+[-_])*[a-z\d]+\.)*([a-z\d]+[-_])*[a-z\d]+$/,B=w()(10).pow(24),T=B.div(2),P={Boundary:"Component triggered an Error Boundary",Compilation:"Compilation error",Execution:"Execution error",Render:"Render error",Source:"Source code not found"},U=f().createElement("span",{className:"spinner-grow spinner-grow-sm me-1",style:{animationDelay:"2s"},role:"status","aria-hidden":"true"}),R=e=>{var t=e.error;return f().createElement("div",{role:"alert"},f().createElement("p",null,"Something went wrong:"),f().createElement("pre",null,t.message))};function j(e){return e&&e.length>=2&&e.length<=64&&e.match(O)}var M=e=>e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace("-","").replace("_","")),q=e=>Array.isArray(e),F=e=>e===Object(e)&&!q(e)&&"function"!=typeof e,L=e=>"string"==typeof e,D=e=>"function"==typeof e,$=function(e){if(F(e)){var t={};return Object.keys(e).forEach(r=>{t[M(r)]=$(e[r])}),t}return q(e)?e.map(e=>$(e)):e},J=(e,t)=>e&&t?e.lt(t)?e:t:e||t,G=(e,t)=>e&&t?e.gt(t)?e:t:e||t,V=(e,t,r)=>{if(null===e)return"???";var n=e.toFixed(),i=n.indexOf(".");if(t=t||6,r=r||7,i>0){var o=Math.min(t,Math.max(r-i,0));o>0&&(o+=1),i+o<n.length&&(n=n.substring(0,i+o))}else i=n.length;for(var a=i-4;a>=0;a-=3)n=n.slice(0,a+1)+","+n.slice(a+1);return"0.000000"===n&&6===t&&7===r?"<0.000001":n},K=e=>e?e.eq(1)?f().createElement(f().Fragment,null,"1 ",f().createElement("span",{className:"text-secondary"},"yoctoNEAR")):f().createElement(f().Fragment,null,V(e.div(B))," ",f().createElement("span",{className:"text-secondary"},"NEAR")):"???",z=e=>e?f().createElement(f().Fragment,null,V(e.div(C))," ",f().createElement("span",{className:"text-secondary"},"TGas")):"???",W=e=>e.toLocaleString("en-us",{day:"numeric",month:"short",year:"numeric"}),X=e=>e.toLocaleString(),H=e=>{if(e&&!e.loading&&e.state){var t=w()(e.state.amount).sub(w()(e.state.storage_usage).mul(w()(A)));if(t.gt(T))return t.sub(T)}return w()(0)},Y=e=>e?new Date(e).toISOString().substring(0,10):"",Z=function(){var e=(0,h._)(function(e){return(0,p._)(this,function(t){switch(t.label){case 0:return[4,fetch("https://ipfs.near.social/add",{method:"POST",headers:{Accept:"application/json"},body:e})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().cid]}})});return function(t){return e.apply(this,arguments)}}(),Q=e=>`https://ipfs.near.social/ipfs/${e}`,ee=(e,t)=>F(e)?Object.entries(e).reduce((e,r)=>{var n=(0,d._)(r,2),i=n[0],o=n[1],a=F(t)?t[i]:void 0;return e+(void 0!==a?ee(o,a):2*i.length+ee(o,void 0)+140)},F(t)?0:98):((null==e?void 0:e.length)||8)-(L(t)?t.length:0),et=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(e=>{var r=(0,d._)(e,2),n=r[0],i=r[1];return F(i)?et(i,`${t}${n}/`):`${t}${n}`}).flat()},er=(e,t)=>{var r=Object.entries(e).reduce((e,r)=>{var n=(0,d._)(r,2),i=n[0],o=n[1],a=F(t)?t[i]:void 0;if(F(o)){var s=F(a)?er(o,a):o;void 0!==s&&(e[i]=s)}else o!==a&&(e[i]=o);return e},{});return Object.keys(r).length?r:void 0},en=e=>L(e)||null===e?e:JSON.stringify(e),ei=e=>F(e)?Object.entries(e).reduce((e,t)=>{var r=(0,d._)(t,2),n=r[0],i=r[1];return e[en(n)]=ei(i),e},{}):en(e),eo=(e,t)=>{var r=t[0],n="**"===r;return n?1===t.length:("*"===r||n?Object.values(e):e.hasOwnProperty(r)?[e[r]]:[]).some(e=>F(e)?t.length>1?eo(e,t.slice(1)):void 0!==e[""]:1===t.length)},ea=(e,t)=>{var r=t[0];return("*"===r?Object.values(e):e.hasOwnProperty(r)?[e[r]]:[]).some(e=>1===t.length||F(e)&&ea(e,t.slice(1)))},es=(e,t,r)=>{var n=t.split("/");return"get"===e?eo(r,n):"keys"===e&&ea(r,n)},el=(e,t,r)=>Object.values(r).some(r=>{var n,i=null==r?void 0:null===(n=r.index)||void 0===n?void 0:n[e];try{return i&&JSON.stringify(JSON.parse(i).key)===JSON.stringify(t)}catch(e){return!1}}),ec={graph:!0,post:!0,index:!0,settings:!0},eu=(e,t)=>{var r=F(e)?JSON.parse(JSON.stringify(e)):{};return F(t)&&Object.entries(t).forEach(e=>{var t=(0,d._)(e,2),n=t[0],i=t[1];if(ec.hasOwnProperty(n)){if(F(i)){var o=r[n]=r[n]||{};Object.keys(i).forEach(e=>{o[e]=!0})}else r[n]=!0}else r[n]=!0}),r},ef=e=>(Object.freeze(e),Object.keys(e).forEach(t=>{if(!Object.getOwnPropertyDescriptor(e,t).get&&"object"==typeof e[t]&&!Object.isFrozen(e[t]))ef(e[t])}),e),eh="$$typeof",ed=e=>null!==e&&"object"==typeof e&&!!e[eh],ep=e=>{if(Array.isArray(e))return e.map(e=>ep(e));if(e instanceof Map)return new Map([...e.entries()].map(e=>{var t=(0,d._)(e,2),r=t[0],n=t[1];return[ep(r),ep(n)]}));if(e instanceof Set)return new Set([...e].map(e=>ep(e)));else if(I.isBuffer(e))return I.from(e);else if(e instanceof URL)return new URL(e);else if(e instanceof File)return new File([e],e.name,{type:e.type});else if(e instanceof Blob)return new Blob([e],{type:e.type});else if(e instanceof Uint8Array||e instanceof ArrayBuffer)return e.slice(0);else if(e instanceof k.ethers.BigNumber||e instanceof x.BN||e instanceof w())return e;else if(e instanceof Date)return new Date(e);else if(e instanceof WebSocket)return e;else if(F(e))return ed(e)?e:Object.fromEntries(Object.entries(e).map(e=>{var t=(0,d._)(e,2);return[t[0],ep(t[1])]}));else if(void 0===e||"function"==typeof e)return e;else return JSON.parse(JSON.stringify(e))},eg=e=>F(e)?Object.fromEntries(Object.entries(e).filter(e=>{var t=(0,d._)(e,2);return void 0!==(t[0],t[1])})):e,em=S(),ev=(e,t,r)=>{var n=e?{src:e}:t?{code:t}:null,i=!0,o=!1,a=void 0;try{for(var s,l=(r||[])[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;if(null==n?void 0:n.src){var u=n.src,f=F(null==c?void 0:c.redirectMap)&&c.redirectMap[u];if(!f)try{f=D(null==c?void 0:c.redirect)&&c.redirect(u)}catch(e){}if(L(f))n={src:f};else if(L(null==f?void 0:f.code))return{code:f.code}}}}catch(e){o=!0,a=e}finally{try{!i&&null!=l.return&&l.return()}finally{if(o)throw a}}return n},ey=s(764).Buffer,eb="PENDING_TRANSACTION_AFTER_SIGNIN",ew=(e,t,r,n)=>({type:"FunctionCall",params:{methodName:e,args:t,gas:r,deposit:n}}),eE={networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",archivalNodeUrl:"https://rpc.testnet.internal.near.org",contractName:"v1.social08.testnet",walletUrl:"https://wallet.testnet.near.org",wrapNearAccountId:"wrap.testnet",apiUrl:"https://discovery-api.stage.testnet.near.org",enableWeb4FastRpc:!1},eS={networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",archivalNodeUrl:"https://rpc.mainnet.internal.near.org",contractName:"social.near",walletUrl:"https://wallet.near.org",wrapNearAccountId:"wrap.near",apiUrl:"https://api.near.social",enableWeb4FastRpc:!1},ek={get:!0,keys:!0},ex=function(){var e=(0,h._)(function(e,t,r,n,i){var o;return(0,p._)(this,function(a){switch(a.label){case 0:if(!e.apiUrl||!ek.hasOwnProperty(t))return[2,i()];r=r||{},n&&(r.blockHeight=n),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch(`${e.apiUrl}/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 2:return[4,a.sent().json()];case 3:return[2,a.sent()];case 4:return o=a.sent(),console.log("API call failed",t,r),console.error(o),[2,i()];case 5:return[2]}})});return function(t,r,n,i,o){return e.apply(this,arguments)}}();function e_(e){return new y.keyStores.BrowserLocalStorageKeyStore(window.localStorage,`${e}:keystore:`)}function eI(e,t){return eC.apply(this,arguments)}function eC(){return(eC=(0,h._)(function(e,t){var r,n,i,o;return(0,p._)(this,function(a){switch(a.label){case 0:return r=e_(t),[4,e.selector];case 1:if(!(n=a.sent()))return[3,4];return[4,n.wallet()];case 2:return i=a.sent(),[4,y.connect({keyStore:r,walletUrl:i.metadata.walletUrl,networkId:e.config.networkId,nodeUrl:e.config.nodeUrl,headers:{}})];case 3:return o=a.sent(),[2,new y.WalletConnection(o,t)];case 4:return[2]}})})).apply(this,arguments)}function eN(){return(eN=(0,h._)(function(e,t){var r,n,i,o,a,s,l,c,u;return(0,p._)(this,function(f){switch(f.label){case 0:return[4,eI(e,r=t.contractName)];case 1:if(!(n=f.sent())._walletBaseUrl)return[3,2];return sessionStorage.setItem(eb,JSON.stringify(t)),n.requestSignIn({contractId:r,methodNames:[]}),[3,7];case 2:return i=y.utils.KeyPair.fromRandom("ed25519"),o=y.transactions.functionCallAccessKey(r,[]),a=i.getPublicKey(),[4,e.selector.then(e=>e.wallet())];case 3:return[4,(s=f.sent()).getAccounts()];case 4:var h,d,p,g,m;return c=(l=f.sent()[0]).accountId,[4,s.signAndSendTransactions({transactions:[{receiverId:c,actions:[{type:"AddKey",params:{publicKey:a.toString(),accessKey:{permission:o.permission.functionCall}}}],gas:C.mul(30)},(h=t.contractName,d=t.methodName,p=t.args,g=t.gas,m=t.deposit,{receiverId:h,actions:[ew(d,p,g.toFixed(0),m.toFixed(0))]})]})];case 5:return u=f.sent(),[4,e_(r).setKey(e.config.networkId,c,i)];case 6:return f.sent(),localStorage.setItem(`${r}_wallet_auth_key`,JSON.stringify({accountId:c,allKeys:[l.publicKey]})),[2,u];case 7:return[2]}})})).apply(this,arguments)}function eA(){return(eA=(0,h._)(function(e,t){return(0,p._)(this,function(r){switch(r.label){case 0:return[4,eI(e,t)];case 1:return[2,r.sent().isSignedIn()]}})})).apply(this,arguments)}function eO(e,t,r,n,i,o){return eB.apply(this,arguments)}function eB(){return(eB=(0,h._)(function(e,t,r,n,i,o){var a,s;return(0,p._)(this,function(l){switch(l.label){case 0:return l.trys.push([0,7,,8]),[4,e.selector];case 1:return[4,l.sent().wallet()];case 2:if(a=l.sent(),!(t!==e.contract.contractId))return[3,5];return[4,eI(e,t)];case 3:if(!(s=l.sent()).isSignedIn())return[3,5];return[4,s.account().functionCall({contractId:t,methodName:r,args:n,gas:i})];case 4:case 6:return[2,l.sent()];case 5:return[4,a.signAndSendTransaction({receiverId:t,actions:[ew(r,n,null!=i?i:C.mul(30).toFixed(0),null!=o?o:"0")]})];case 7:throw l.sent();case 8:return[2]}})})).apply(this,arguments)}function eT(){return(eT=(0,h._)(function(e,t){return(0,p._)(this,function(r){switch(r.label){case 0:return[4,new y.Account(e.nearConnection.connection,t).state()];case 1:return[2,r.sent()]}})})).apply(this,arguments)}function eP(e,t){return eU.apply(this,arguments)}function eU(){return(eU=(0,h._)(function(e,t){var r,n,i,o,a,s,l,c,u;return(0,p._)(this,function(f){switch(f.label){case 0:if(1!==t.length)return[3,2];if(n=(r=t[0]).contractName,i=r.methodName,o=r.args,a=r.gas,!(!(s=r.deposit)||"0"===s.toString()))return[3,2];return[4,eO(e,n,i,o,null==a?void 0:a.toString())];case 1:case 5:return[2,f.sent()];case 2:return f.trys.push([2,6,,7]),[4,e.selector];case 3:return[4,f.sent().wallet()];case 4:return l=f.sent(),c=[],u=w()(0),t.forEach(e=>{var t,r=e.contractName,n=e.methodName,i=e.args,o=e.gas,a=e.deposit,s=u.add(o),l=ew(n,i,o.toFixed(0),a.toFixed(0));(null===(t=c[c.length-1])||void 0===t?void 0:t.receiverId)!==r||s.gt(N)?(c.push({receiverId:r,actions:[]}),u=o):u=s,c[c.length-1].actions.push(l)}),[4,l.signAndSendTransactions({transactions:c})];case 6:throw f.sent();case 7:return[2]}})})).apply(this,arguments)}function eR(){return(eR=(0,h._)(function(e,t){return(0,p._)(this,function(r){switch(r.label){case 0:return[4,e.selector];case 1:return[4,r.sent().wallet()];case 2:return[2,r.sent().signMessage(t)]}})})).apply(this,arguments)}function ej(){return(ej=(0,h._)(function(e,t,r,n,i,o){var a;return(0,p._)(this,function(s){switch(s.label){case 0:return i=i||{},[4,e.query({request_type:"call_function",account_id:r,method_name:n,args_base64:ey.from(JSON.stringify(i)).toString("base64"),block_id:t,finality:o})];case 1:return[2,(a=s.sent()).result&&a.result.length>0&&JSON.parse(ey.from(a.result).toString())]}})})).apply(this,arguments)}function eM(){return(eM=(0,h._)(function(e,t,r,n){var i,o;return(0,p._)(this,function(a){switch(a.label){case 0:r=r||{},i=new URL(`https://rpc.web4.near.page/account/${e}/view/${t}`),Object.entries(r).forEach(e=>{var t=(0,d._)(e,2),r=t[0],n=t[1];void 0!==n&&i.searchParams.append(`${r}.json`,JSON.stringify(n))}),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch(i.toString())];case 2:return[4,a.sent().json()];case 3:return[2,a.sent()];case 4:return o=a.sent(),console.log("Web4 view call failed",i.toString()),console.error(o),[2,n()];case 5:return[2]}})})).apply(this,arguments)}function eq(e){return eF.apply(this,arguments)}function eF(){return(eF=(0,h._)(function(e){var t,r,n,i,o,a,s,l,c,u,f,d,g,m,v,b;return(0,p._)(this,function(w){switch(w.label){case 0:return t=e.networkId,r=e.config,i=void 0===(n=e.errorCallback)?()=>{}:n,o=e.keyStore,a=e.selector,l=void 0===(s=e.walletConnectCallback)?()=>{}:s,u=void 0===(c=e.customElements)?{}:c,d=void 0===(f=e.features)?{}:f,!r&&(r={},!t&&(r.networkId="mainnet")),t&&!r.networkId&&(r.networkId=t),"mainnet"===r.networkId?r=Object.assign({},eS,r):"testnet"===r.networkId&&(r=Object.assign({},eE,r)),r.walletConnectCallback=l,r.errorCallback=i,r.customElements=Object.assign({},r.customElements,u),o=null!=o?o:new y.keyStores.BrowserLocalStorageKeyStore,[4,y.connect(Object.assign({deps:{keyStore:o}},r))];case 1:var E,S,k,x,_,I,C,N;if(g=w.sent(),(m={config:r,selector:a,keyStore:o,nearConnection:g,features:d}).nearArchivalConnection=y.Connection.fromConfig({networkId:r.networkId,provider:{type:"JsonRpcProvider",args:{url:r.archivalNodeUrl}},signer:{type:"InMemorySigner",keyStore:o}}),v=e=>{var t;return"optimistic"===e||"final"===e?{finality:e,blockId:void 0}:null!=e?{finality:void 0,blockId:parseInt(e)}:{finality:null!==(t=r.defaultFinality)&&void 0!==t?t:"optimistic",blockId:void 0}},m.signMessage=e=>(function(e,t){return eR.apply(this,arguments)})(m,e),m.viewCall=(e,t,n,i)=>{var o=v(i),a=o.blockId,s=o.finality,l=()=>(function(e,t,r,n,i,o){return ej.apply(this,arguments)})(a?m.nearArchivalConnection.provider:m.nearConnection.connection.provider,null!=a?a:void 0,e,t,n,s),c=()=>"optimistic"===s&&r.enableWeb4FastRpc?function(e,t,r,n){return eM.apply(this,arguments)}(e,t,n,l):l();return e===r.contractName&&(a||"final"===s)?ex(r,t,n,a,c):c()},m.block=e=>{var t=v(e);return(t.blockId?m.nearArchivalConnection.provider:m.nearConnection.connection.provider).block(t)},m.functionCall=(e,t,r,n,i)=>eO(m,e,t,r,n,i),m.sendTransactions=e=>eP(m,e),m.isSignedIntoContract=(E=(0,h._)(function(e){return(0,p._)(this,function(t){return[2,function(e,t){return eA.apply(this,arguments)}(m,e)]})}),function(e){return E.apply(this,arguments)}),m.signInAndSetPendingTransaction=(S=(0,h._)(function(e){return(0,p._)(this,function(t){return[2,function(e,t){return eN.apply(this,arguments)}(m,e)]})}),function(e){return S.apply(this,arguments)}),m.contract=(k=m,x=r.contractName,I=(_={viewMethods:["storage_balance_of","get","get_num_accounts","get_accounts_paged","is_write_permission_granted","keys"],changeMethods:["set","grant_write_permission","storage_deposit","storage_withdraw"]}).viewMethods,C=_.changeMethods,N={near:k,contractId:x},(void 0===I?[]:I).forEach(e=>{N[e]=t=>k.viewCall(x,e,t)}),(void 0===C?[]:C).forEach(e=>{N[e]=(t,r,n)=>k.functionCall(x,e,t,r,n)}),N),m.accountState=e=>(function(e,t){return eT.apply(this,arguments)})(m,e),!(b=JSON.parse(sessionStorage.getItem(eb))))return[3,7];return console.log("found pending transaction",b),[4,eI(m,b.contractName)];case 2:if(!w.sent())return[3,7];console.log("sending pending transaction",b),w.label=3;case 3:return w.trys.push([3,5,,6]),[4,eP(m,[b])];case 4:return w.sent(),[3,6];case 5:return console.error("error sending pending transaction",w.sent()),[3,6];case 6:sessionStorage.removeItem(eb),w.label=7;case 7:return[2,m]}})})).apply(this,arguments)}var eL=(0,g.singletonHook)({},()=>{var e=(0,d._)((0,u.useState)(null),2),t=e[0],r=e[1];return{nearPromise:t,initNear:(0,u.useMemo)(()=>e=>{var t,n=(null===(t=e.config)||void 0===t?void 0:t.networkId)||e.networkId;return r(Promise.all(["testnet"===n?e:(0,v._)((0,m._)({},e),{networkId:"testnet",config:void 0,keyStore:void 0,selector:void 0}),"mainnet"===n?e:(0,v._)((0,m._)({},e),{networkId:"mainnet",config:void 0,keyStore:void 0,selector:void 0})].concat("mainnet"!==n&&"testnet"!==n?e:[]).map(eq)).then(e=>e.map(e=>(0,v._)((0,m._)({},e),{default:e.config.networkId===n}))))},[])}}),eD=[],e$=(0,g.singletonHook)(eD,()=>{var e=(0,d._)((0,u.useState)(eD),2),t=e[0],r=e[1],n=eL().nearPromise;return((0,u.useEffect)(()=>{n&&n.then(r)},[n]),t)?{default:t.find(e=>e.default),testnet:t.find(e=>"testnet"===e.config.networkId),mainnet:t.find(e=>"mainnet"===e.config.networkId)}:t}),eJ=e=>e$()[e||"default"]||null,eG=require("local-storage"),eV=s.n(eG),eK="near-social-vm:v01:",ez=eK+":accountId:",eW=eK+":pretendAccountId:",eX={loading:!0,signedAccountId:null!==(t=eV().get(ez))&&void 0!==t?t:void 0,pretendAccountId:null!==(r=eV().get(eW))&&void 0!==r?r:void 0,accountId:null!==(i=null!==(n=eV().get(eW))&&void 0!==n?n:eV().get(ez))&&void 0!==i?i:void 0,state:null,near:null};function eH(){return(eH=(0,h._)(function(e,t){var r,n,i,o,a,s;return(0,p._)(this,function(l){switch(l.label){case 0:if(e.connectedContractId=null==t?void 0:null===(r=t.contract)||void 0===r?void 0:r.contractId,!(e.connectedContractId&&e.connectedContractId!==e.config.contractName&&e.connectedContractId!==e.config.allowExternalContract))return[3,4];return[4,e.selector];case 1:return[4,(o=l.sent()).wallet()];case 2:return[4,l.sent().signOut()];case 3:l.sent(),e.connectedContractId=null,t=o.store.getState(),l.label=4;case 4:if(e.accountId=null!==(a=null==t?void 0:null===(i=t.accounts)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.accountId)&&void 0!==a?a:null,e.accountId){e.publicKey=null;try{(null==t?void 0:t.selectedWalletId)==="here-wallet"&&(s=eV().get("herewallet:keystore"),e.publicKey=y.KeyPair.fromString(s[e.config.networkId].accounts[e.accountId]).getPublicKey())}catch(e){console.error(e)}if(!e.publicKey)try{e.publicKey=y.KeyPair.fromString(eV().get((null==t?void 0:t.selectedWalletId)==="meteor-wallet"?`_meteor_wallet${e.accountId}:${e.config.networkId}`:`near-api-js:keystore:${e.accountId}:${e.config.networkId}`)).getPublicKey()}catch(e){console.error(e)}}return[2]}})})).apply(this,arguments)}var eY=function(){var e=(0,h._)(function(e,t){var r,n,i,o,a,s,l;return(0,p._)(this,function(c){switch(c.label){case 0:var u;if((r=e.accountId)?(eV().set(ez,r),e.config.walletConnectCallback(r)):eV().remove(ez),o={loading:!1,signedAccountId:r,pretendAccountId:i=null!==(n=eV().get(eW))&&void 0!==n?n:void 0,accountId:null!=i?i:r,state:null,near:e,refresh:(0,h._)(function(){return(0,p._)(this,function(r){switch(r.label){case 0:return[4,eY(e,t)];case 1:return[2,r.sent()]}})}),startPretending:(u=(0,h._)(function(r){return(0,p._)(this,function(n){switch(n.label){case 0:return r?eV().set(eW,r):eV().remove(eW),[4,eY(e,t)];case 1:return n.sent(),[2]}})}),function(e){return u.apply(this,arguments)})},!r)return[3,2];return[4,Promise.all([e.contract.storage_balance_of({account_id:r}),e.accountState(r)])];case 1:s=(a=d._.apply(void 0,[c.sent(),2]))[0],l=a[1],o.storageBalance=s,o.state=l,c.label=2;case 2:return t(o),[2]}})});return function(t,r){return e.apply(this,arguments)}}(),eZ=(0,g.singletonHook)(eX,()=>{var e=(0,d._)((0,u.useState)(eX),2),t=e[0],r=e[1],n=eJ();return(0,u.useEffect)(()=>{if(!!n)n.selector.then(e=>{e.store.observable.subscribe(function(){var e=(0,h._)(function(e){return(0,p._)(this,function(t){switch(t.label){case 0:return[4,function(e,t){return eH.apply(this,arguments)}(n,e)];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,eY(n,r)];case 3:return t.sent(),[3,5];case 4:return console.error(t.sent()),[3,5];case 5:return[2]}})});return function(t){return e.apply(this,arguments)}}())})},[n]),t}),eQ=e=>{var t=eJ(),r=eZ();if(!!t&&(!e||t.config.networkId===e))return r.accountId},e0=require("@swc/helpers/_/_object_without_properties"),e1=require("react-bootstrap/Modal"),e2=s.n(e1),e4=require("react-bootstrap/Alert"),e6=s.n(e4),e3=require("react-bootstrap/Toast"),e5=s.n(e3),e8=require("react-bootstrap/ToastContainer"),e7=s.n(e8),e9=require("remark-gfm"),te=s.n(e9),tt=require("react-markdown"),tr=s.n(tt),tn=require("react-syntax-highlighter"),ti=require("react-syntax-highlighter/dist/esm/styles/prism"),to=require("mdast-util-find-and-replace"),ta=/@((?:(?:[a-z\d]+[-_])*[a-z\d]+\.)*(?:[a-z\d]+[-_])*[a-z\d]+)/gi;function ts(){function e(e,t,r){if(/[\w`]/.test(r.input.charAt(r.index-1))||/[/\w`]/.test(r.input.charAt(r.index+e.length))||t.length<2||t.length>64)return!1;var n={type:"text",value:e};return n={type:"strong",children:[n],data:{hProperties:{accountId:t}}}}return function(t){return(0,to.findAndReplace)(t,ta,e),t}}var tl=/#(\w+)/gi;function tc(){function e(e,t,r){if(/[\w`]/.test(r.input.charAt(r.index-1))||/[/\w`]/.test(r.input.charAt(r.index+e.length)))return!1;var n={type:"text",value:e};return n={type:"strong",children:[n],data:{hProperties:{hashtag:t}}}}return function(t){return(0,to.findAndReplace)(t,tl,e),t}}var tu=e=>{var t=e.onLink,r=e.onLinkClick,n=e.text,i=e.onMention,o=e.onHashtag,a=e.onImage,s=e.syntaxHighlighterProps;return f().createElement(tr(),{plugins:[],rehypePlugins:[],remarkPlugins:[te(),ts,tc],children:n,components:{strong(e){var t,r,n,a,s=e.node,l=e.children,c=(0,e0._)(e,["node","children"]);return i&&(null===(t=s.properties)||void 0===t?void 0:t.accountId)?i(null===(n=s.properties)||void 0===n?void 0:n.accountId):o&&(null===(r=s.properties)||void 0===r?void 0:r.hashtag)?o(null===(a=s.properties)||void 0===a?void 0:a.hashtag):f().createElement("strong",c,l)},a:e=>{var n,i=e.node,o=(0,e0._)(e,["node"]);return t?t((0,v._)((0,m._)({},o),{href:null===(n=i.properties)||void 0===n?void 0:n.href})):r?f().createElement("a",(0,m._)({onClick:r},o)):f().createElement("a",(0,m._)({target:"_blank"},o))},img:e=>{e.node;var t=(0,e0._)(e,["node"]);return a?a((0,m._)({},t)):f().createElement("img",(0,m._)({className:"img-fluid"},t))},blockquote:e=>{e.node;var t=(0,e0._)(e,["node"]);return f().createElement("blockquote",(0,m._)({className:"blockquote"},t))},table:e=>{e.node;var t=(0,e0._)(e,["node"]);return f().createElement("table",(0,m._)({className:"table table-striped"},t))},code(e){e.node;var t=e.inline,r=e.className,n=e.children,i=(0,e0._)(e,["node","inline","className","children"]),o=/language-(\w+)/.exec(r||""),a=null!=s?s:{},l=a.wrapLines,c=a.lineProps,u=a.showLineNumbers,h=a.lineNumberStyle;return!t&&o?f().createElement(tn.Prism,(0,m._)({children:String(n).replace(/\n$/,""),style:ti.tomorrow,language:o[1],PreTag:"div",wrapLines:l,lineProps:c,showLineNumbers:u,lineNumberStyle:h},i)):f().createElement("code",(0,m._)({className:r},i),n)}}})},tf=require("idb"),th={ViewCall:"ViewCall",Fetch:"Fetch",Block:"Block",LocalStorage:"LocalStorage",CustomPromise:"CustomPromise",EthersCall:"EthersCall"},td={NotStarted:"NotStarted",InProgress:"InProgress",Done:"Done",Invalidated:"Invalidated"},tp="cache-v1";class tg{invalidateCallbacks(e,t){var r;if(null===(r=e.invalidationCallbacks)||void 0===r?void 0:r.length){var n=e.invalidationCallbacks;e.invalidationCallbacks=[],setTimeout(()=>{n.forEach(e=>{try{e()}catch(e){}})},t?this.finalSynchronizationDelayMs+50:50)}}innerGet(e){var t=this;return(0,h._)(function(){return(0,p._)(this,function(r){switch(r.label){case 0:return[4,t.dbPromise];case 1:return[2,r.sent().get(tp,e)]}})})()}innerSet(e,t){var r=this;return(0,h._)(function(){return(0,p._)(this,function(n){switch(n.label){case 0:return[4,r.dbPromise];case 1:return[2,n.sent().put(tp,t,e)]}})})()}cachedPromise(e,t,r,n){e=JSON.stringify(e);var i=this.cache[e]||{status:td.NotStarted,invalidationCallbacks:[],result:null,time:new Date().getTime()};if(this.cache[e]=i,!F(r)&&(r={onInvalidate:r}),r.onInvalidate&&i.invalidationCallbacks.push(r.onInvalidate),!i.subscription&&r.subscribe){var o=()=>{i.subscription=setTimeout(()=>{document.hidden?o():(i.subscription=null,i.status=td.Invalidated,this.invalidateCallbacks(i,!1))},5e3)};o()}return i.status===td.InProgress||i.status===td.Done&&i.time+3e5>new Date().getTime()?i.result:(i.status===td.NotStarted&&!(null==n?void 0:n.ignoreCache)&&this.innerGet(e).then(e=>{(e||(null==n?void 0:n.forceCachedValue))&&i.status===td.InProgress&&(i.result=e,i.time=new Date().getTime(),this.invalidateCallbacks(i,!1))}),i.status=td.InProgress,t&&t().then(t=>{i.status=td.Done,i.time=new Date().getTime(),JSON.stringify(t)!==JSON.stringify(i.result)&&(i.result=t,this.innerSet(e,t),this.invalidateCallbacks(i,!1))}).catch(t=>{console.error(t),i.status=td.Done;var r=void 0;i.time=new Date().getTime(),JSON.stringify(r)!==JSON.stringify(i.result)&&(i.result=r,this.innerSet(e,r),this.invalidateCallbacks(i,!1))}),i.result)}invalidateCache(e,t){var r=[],n=`${e.config.apiUrl}/index`;Object.keys(this.cache).forEach(i=>{try{o=JSON.parse(i)}catch(e){console.error("Key deserialization failed",i);return}if(o.action!==th.ViewCall||o.contractId!==e.config.contractName||o.blockId&&"optimistic"!==o.blockId&&"final"!==o.blockId)o.action===th.ViewCall&&o.contractId===t&&r.push([i,"final"===o.blockId]);else try{;(null===(a=o.args)||void 0===a?void 0:a.keys).some(e=>es(o.methodName,e,t))&&r.push([i,"final"===o.blockId])}catch(e){}if(o.action===th.Fetch&&o.url===n)try{var o,a,s,l=JSON.parse(null===(s=o.options)||void 0===s?void 0:s.body),c=l.action,u=l.key;c&&u&&el(c,u,t)&&r.push([i,!0])}catch(e){}}),console.log("Cache invalidation",r),r.forEach(e=>{var t=(0,d._)(e,2),r=t[0],n=t[1],i=this.cache[r];i.status=td.Invalidated,this.invalidateCallbacks(i,n)})}cachedBlock(e,t,r,n){return this.cachedPromise({action:th.Block,blockId:t},()=>e.block(t),r,n)}cachedViewCall(e,t,r,n,i,o,a){return this.cachedPromise({action:th.ViewCall,contractId:t,methodName:r,args:n,blockId:i},()=>e.viewCall(t,r,n,i),o,a)}asyncFetch(e,t){return(0,h._)(function(){var r,n,i,o,a,s,l;return(0,p._)(this,function(c){switch(c.label){case 0:n=null==t?void 0:null===(r=t.responseType)||void 0===r?void 0:r.toLowerCase(),t={method:null==t?void 0:t.method,headers:null==t?void 0:t.headers,body:null==t?void 0:t.body},c.label=1;case 1:return c.trys.push([1,6,,7]),[4,fetch(e,t)];case 2:if(o=(i=c.sent()).status,a=i.ok,s=i.headers.get("content-type"),!a)return[3,4];return[4,"arraybuffer"===n?i.arrayBuffer():"blob"===n?i.blob():"formdata"===n?i.formData():"json"===n?i.json():"text"===n?i.text():s&&-1!==s.indexOf("application/json")?i.json():i.text()];case 3:return l=c.sent(),[3,5];case 4:l=void 0,c.label=5;case 5:return[2,{ok:a,status:o,contentType:s,body:l}];case 6:return[2,{ok:!1,error:c.sent().message}];case 7:return[2]}})})()}cachedFetch(e,t,r,n){return this.cachedPromise({action:th.Fetch,url:e,options:t},()=>this.asyncFetch(e,t),r,n)}cachedCustomPromise(e,t,r,n){return this.cachedPromise({action:th.CustomPromise,key:e},()=>t(),r,n)}socialGet(e,t,r,n,i,o,a){if(!e)return null;var s={keys:t=(t=Array.isArray(t)?t:[t]).map(e=>r?`${e}/**`:`${e}`),options:i},l=this.cachedViewCall(e,e.config.contractName,"get",s,n,o,a);if(null===l)return null;if(1===t.length){for(var c=t[0].split("/"),u=0;u<c.length;u++){var f=c[u];if("*"===f||"**"===f)break;l=null==l?void 0:l[f]}}return l}socialIndex(e,t,r,n,i,o){var a=this.cachedFetch(`${e.config.apiUrl}/index`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t,key:r,options:n})},i,o);return(null==a?void 0:a.ok)?a.body:null}localStorageGet(e,t,r){return this.cachedPromise({action:th.LocalStorage,domain:e,key:t},void 0,r,{forceCachedValue:!0})}asyncLocalStorageGet(e,t){return t=JSON.stringify({action:th.LocalStorage,domain:e,key:t}),this.innerGet(t)}localStorageSet(e,t,r){t=JSON.stringify({action:th.LocalStorage,domain:e,key:t});var n=this.cache[t]||{status:td.NotStarted,invalidationCallbacks:[],result:null,time:new Date().getTime()};this.cache[t]=n,n.status=td.Done,JSON.stringify(r)!==JSON.stringify(n.result)&&(n.result=r,this.innerSet(t,r),this.invalidateCallbacks(n,!1))}cachedEthersCall(e,t,r,n,i){return e?this.cachedPromise({action:th.EthersCall,callee:t,args:r},()=>e[t](...r),n,i):null}constructor(e,t){this.dbPromise=(0,tf.openDB)(void 0===e?"cacheDb":e,1,{upgrade(e){e.createObjectStore(tp)}}),this.cache={},this.finalSynchronizationDelayMs=void 0===t?3e3:t}}var tm=new tg,tv=new tg("secondaryCacheDb"),ty=(0,g.singletonHook)(tm,()=>tm),tb=(0,g.singletonHook)(tv,()=>tv),tw=e=>{var t=eJ(),r=ty(),n=tb();return e&&e!==t.config.networkId?n:r},tE=require("react-uuid"),tS=s.n(tE),tk=e=>{var t=JSON.stringify(e,null,2);return`\`\`\`json
${t}
\`\`\``},tx={page:"confirm_transactions"},t_={SendTransactionWithoutConfirmation:"send_transaction_without_confirmation"};function tI(e){var t,r,n,i,o,a=(0,u.useState)(tS()()),s=eJ(e.networkId);eQ(e.networkId);var l=tw(),c=(0,d._)((0,u.useState)(!1),2),g=c[0],m=c[1],v=(0,d._)((0,u.useState)(e.transactions),1)[0],y=(0,d._)((0,u.useState)(null),2),b=y[0],w=y[1],E=(0,d._)((0,u.useState)(!1),2),S=E[0],k=E[1],x=(0,d._)((0,u.useState)(null),2),_=x[0],I=x[1],C=e.widgetSrc,N=!!(null!==(o=null==s?void 0:null===(i=s.features)||void 0===i?void 0:i.bypassTransactionConfirmation)&&void 0!==o&&o);var A=(t=(0,h._)(function(e,t){return(0,p._)(this,function(r){switch(r.label){case 0:return[4,l.asyncLocalStorageGet(tx,{widgetSrc:e,contractId:t,type:t_.SendTransactionWithoutConfirmation})];case 1:return[2,r.sent()]}})}),function(e,r){return t.apply(this,arguments)}),O=N||v[0].contractName!==s.contract.contractId&&1===v.length&&!(v[0].deposit&&v[0].deposit.gt(0));(0,u.useEffect)(()=>{(0,h._)(function(){var e,t,r,n,i;return(0,p._)(this,function(o){switch(o.label){case 0:if(!O)return[3,5];return e=v[0].contractName,[4,s.isSignedIntoContract(e)];case 1:return t=o.sent(),[4,A(C,e)];case 2:if(r=o.sent(),w(n=N||!!(t&&r&&r[v[0].methodName])),!n)return[3,4];return m(!0),[4,s.sendTransactions(v)];case 3:i=o.sent(),m(!1),B(i),o.label=4;case 4:return[3,6];case 5:w(!1),o.label=6;case 6:return[2]}})})()},[]);var B=e.onHide,T=!!v;var P=(r=(0,h._)(function(){return(0,p._)(this,function(e){return k(!S),I(null),[2]})}),function(){return r.apply(this,arguments)});if(null===b)return f().createElement(f().Fragment,null);if(b){var R=v[0];return f().createElement(e7(),{position:"bottom-end",className:"position-fixed"},f().createElement(e5(),{show:T,bg:"info"},f().createElement(e5().Header,null,"Sending transaction ",U),f().createElement(e5().Body,null,"Calling contract"," ",f().createElement("span",{className:"font-monospace"},R.contractName)," ","with method"," ",f().createElement("span",{className:"font-monospace"},R.methodName))))}return f().createElement(e2(),{size:"xl",centered:!0,scrollable:!0,show:T,onHide:B},f().createElement(e2().Header,{closeButton:!0},f().createElement(e2().Title,null,"Confirm Transaction")),f().createElement(e2().Body,null,v&&v.map((e,t)=>f().createElement("div",{key:`${a}-${t}`},f().createElement("div",null,f().createElement("h4",null,"Transaction #",t+1)),f().createElement("div",null,f().createElement("span",{className:"text-secondary"},"Contract ID: "),f().createElement("span",{className:"font-monospace"},e.contractName)),f().createElement("div",null,f().createElement("span",{className:"text-secondary"},"Method name: "),f().createElement("span",{className:"font-monospace"},e.methodName)),e.deposit&&e.deposit.gt(0)&&f().createElement("div",null,f().createElement("span",{className:"text-secondary"},"Deposit: "),f().createElement("span",{className:"font-monospace"},K(e.deposit))),f().createElement("div",null,f().createElement("span",{className:"text-secondary"},"Gas: "),f().createElement("span",{className:"font-monospace"},z(e.gas))),f().createElement(tu,{text:tk(e.args)}))),O?f().createElement(f().Fragment,null,f().createElement("div",{class:"form-check form-switch"},f().createElement("input",{class:"form-check-input",type:"checkbox",id:"dontaskagaincheckbox",checked:S,onChange:()=>P()}),f().createElement("label",{class:"form-check-label",for:"dontaskagaincheckbox"},"Don't ask again for sending similar transactions by"," ",f().createElement("span",{className:"font-monospace"},C))),_?f().createElement(e6(),{variant:"danger"},'There was an error when choosing "Don\'t ask again":'," ",_):f().createElement(f().Fragment,null)):f().createElement(f().Fragment,null)),f().createElement(e2().Footer,null,f().createElement("button",{className:"btn btn-success",disabled:g,onClick:(n=(0,h._)(function(e){var t,r,n,i,o,a;return(0,p._)(this,function(c){switch(c.label){case 0:if(e.preventDefault(),m(!0),!S)return[3,7];return r=(t=v[0]).contractName,n=t.methodName,[4,A(C,r)];case 1:(i=c.sent()||{})[n]=!0,l.localStorageSet(tx,{widgetSrc:C,contractId:r,type:t_.SendTransactionWithoutConfirmation},i),c.label=2;case 2:return c.trys.push([2,6,,7]),[4,s.isSignedIntoContract(r)];case 3:if(c.sent())return[3,5];return[4,s.signInAndSetPendingTransaction(t)];case 4:return o=c.sent(),m(!1),B(o?o.find(e=>e.transaction.receiver_id===r):o),[2];case 5:return[3,7];case 6:return I(c.sent().message),m(!1),[2];case 7:return[4,s.sendTransactions(v)];case 8:return a=c.sent(),m(!1),B(a),[2]}})}),function(e){return n.apply(this,arguments)})},g&&U," Confirm"),f().createElement("button",{className:"btn btn-secondary",onClick:B,disabled:g},"Close")))}var tC=require("@swc/helpers/_/_type_of"),tN=require("react-files"),tA=s.n(tN),tO=require("react-infinite-scroller"),tB=s.n(tO),tT=A.mul(2e3),tP=A.mul(500),tU=A.mul(500),tR=A.mul(500),tj=function(){var e=(0,h._)(function(e,t){var r;return(0,p._)(this,function(n){switch(n.label){case 0:return r=et(t),[4,e.contract.get({keys:r})];case 1:return[2,n.sent()]}})});return function(t,r){return e.apply(this,arguments)}}(),tM=function(){var e=(0,h._)(function(e,t,r,n){var i,o,a,s,l,c,u,f,h;return(0,p._)(this,function(p){switch(p.label){case 0:return[4,e.selector];case 1:if(p.sent(),!(i=e.accountId))return alert("You're not logged in. Sign in to commit data."),[2];return[4,Promise.all([e.viewCall(e.config.contractName,"get_account_storage",{account_id:i}),i!==t?e.viewCall(e.config.contractName,"is_write_permission_granted",{predecessor_id:i,key:t}):Promise.resolve(!0)])];case 2:if(a=(o=d._.apply(void 0,[p.sent(),2]))[0],s=o[1],l=w()((null==a?void 0:a.available_bytes)||"0"),c={[t]:ei(r)},u={},n)return[3,4];return[4,tj(e,c)];case 3:u=p.sent(),c=er(c,u),p.label=4;case 4:return h=G((f=A.mul(ee(c,u)).add(a?w()(0):tP).add(s?w()(0):tR).add(tU)).sub(l.mul(A)),a?s?w()(0):w()(1):tT),[2,{originalData:r,accountId:t,accountStorage:a,availableBytes:l,currentData:u,data:c,expectedDataBalance:f,deposit:h,permissionGranted:s}]}})});return function(t,r,n,i){return e.apply(this,arguments)}}(),tq=function(){var e=(0,h._)(function(e,t,r){return(0,p._)(this,function(n){switch(n.label){case 0:return console.log("Committing data",t),[4,e.contract.set({data:t},C.mul(100).toFixed(0),r.toFixed(0))];case 1:return[2,n.sent()]}})});return function(t,r,n){return e.apply(this,arguments)}}();(function(){var e=(0,h._)(function(e,t,r){var n;return(0,p._)(this,function(i){switch(i.label){case 0:return[4,tM(e,t,r)];case 1:return[2,tq(e,(n=i.sent()).data,n.deposit)]}})});})();var tF=function(){var e=(0,h._)(function(e,t,r){var n,i;return(0,p._)(this,function(o){switch(o.label){case 0:return[4,e.selector];case 1:return[4,o.sent().wallet()];case 2:return n=o.sent(),i=[],e.publicKey&&(i.push(ew("grant_write_permission",{public_key:e.publicKey.toString(),keys:[e.accountId]},C.mul(100).toFixed(0),r.gt(0)?r.toFixed(0):"1")),r=w()(0)),i.push(ew("set",{data:t},C.mul(100).toFixed(0),r.gt(0)?r.toFixed(0):"1")),[4,n.signAndSendTransaction({receiverId:e.config.contractName,actions:i})];case 3:return[2,o.sent()]}})});return function(t,r,n){return e.apply(this,arguments)}}(),tL=require("react-bootstrap"),tD=e=>{var t=JSON.stringify(e,null,2);return`\`\`\`json
${t}
\`\`\``},t$={page:"commit"},tJ={WritePermission:"write_permission"},tG=e=>{var t,r,n,i,o,a,s,l,c,g,m=eJ(e.networkId),v=eQ(e.networkId),y=tw(),b=(0,d._)((0,u.useState)(!1),2),w=b[0],E=b[1],S=(0,d._)((0,u.useState)(0),2),k=S[0],x=S[1],_=(0,d._)((0,u.useState)(!1),2),I=_[0],C=_[1],N=(0,d._)((0,u.useState)(null),2),O=N[0],B=N[1],T=(0,d._)((0,u.useState)(null),2),P=T[0],R=T[1],j=(0,d._)((0,u.useState)(null),2),M=j[0],q=j[1],F=(0,d._)((0,u.useState)(!0),2),L=F[0],D=F[1],$=e.show,J=e.onHide,G=()=>{if(e.onCancel)try{e.onCancel()}catch(e){console.error(e)}J()},V=e.data,z=e.force,W=e.widgetSrc;(0,u.useEffect)(()=>{W?(q(null),y.asyncLocalStorageGet(t$,{widgetSrc:W,accountId:v,type:tJ.WritePermission}).then(e=>q(e))):q(!1)},[W,v,y,$]),(0,u.useEffect)(()=>{D(!1!==M)},[M]),(0,u.useEffect)(()=>{if(I||!$||!v||!m)return;var e=JSON.stringify(null!=V?V:null);if(!!z||e!==O)B(e),R(null),tM(m,v,V,z).then(R)},[I,V,O,z,m,v,$]);var X=function(){var t=(0,h._)(function(){var t,r;return(0,p._)(this,function(n){switch(n.label){case 0:if(C(!0),t=L&&eu(M,P.data[v]),y.localStorageSet(t$,{widgetSrc:W,accountId:v,type:tJ.WritePermission},t),q(t),r=P.deposit.add(A.mul(k)),!P.permissionGranted)return[3,2];return[4,tq(m,P.data,r)];case 1:case 3:return n.sent(),[3,5];case 2:if(v!==m.accountId)return[3,4];return[4,tF(m,P.data,r)];case 4:alert("No permission to commit under given account"),n.label=5;case 5:if(R(null),B(null),e.onCommit)try{e.onCommit(P.data)}catch(e){console.error(e)}return y.invalidateCache(m,P.data),J(),C(!1),[2]}})});return function(){return t.apply(this,arguments)}}(),H=P&&!P.permissionGranted&&v!==m.accountId;!I&&!H&&!w&&P&&$&&M&&P.data&&P.deposit.add(A.mul(k)).eq(0)&&P.permissionGranted&&JSON.stringify(eu(M,P.data[v]))===JSON.stringify(M)&&(E(!0),X().then(()=>E(!1)));var Y={authorIds:null!==(l=null==m?void 0:null===(r=m.features)||void 0===r?void 0:null===(t=r.commitModalBypass)||void 0===t?void 0:t.authorIds)&&void 0!==l?l:[],sources:null!==(c=null==m?void 0:null===(i=m.features)||void 0===i?void 0:null===(n=i.commitModalBypass)||void 0===n?void 0:n.sources)&&void 0!==c?c:[],bypassAll:!!(null!==(g=null==m?void 0:null===(a=m.features)||void 0===a?void 0:null===(o=a.commitModalBypass)||void 0===o?void 0:o.bypassAll)&&void 0!==g&&g)},Z=(0,d._)((null!=W?W:"").split("/"),1)[0],Q=Y.bypassAll||!!Z&&Y.authorIds.indexOf(Z)>-1||!!W&&Y.sources.indexOf(W.split("@")[0])>-1,ee=!H&&Q,et=!!P&&$&&!w&&null!==M,er=et&&!ee;return(0,u.useEffect)(()=>{et&&ee&&!I&&X()},[et,ee,I]),f().createElement(e2(),{size:"xl",centered:!0,scrollable:!0,show:er,onHide:G},f().createElement(e2().Header,{closeButton:!0},f().createElement(e2().Title,null,"Saving data")),f().createElement(e2().Body,null,H?f().createElement("div",null,f().createElement("h5",null,"Can't commit, because the account ",m.accountId," doesn't have permission to write under pretended account ",v)):P?f().createElement("div",null,f().createElement("div",null,P.data?f().createElement(tu,{text:tD(P.data)}):f().createElement("h5",null,"No new data to save")),P.data&&(null==P?void 0:null===(s=P.deposit)||void 0===s?void 0:s.gt(0))&&f().createElement("div",null,f().createElement("h6",null,"Required storage deposit"," ",f().createElement("small",{className:"text-secondary"},"(can be recovered later)")),f().createElement("div",{className:"mb-2"},P.deposit.div(A).toFixed(0)," bytes ="," ",K(P.deposit)),f().createElement("h6",null,"Optional storage deposit"," ",f().createElement("small",{className:"text-secondary"},"(can be used to avoid future wallet TX confirmation)")),f().createElement("div",null,f().createElement(tL.ToggleButtonGroup,{type:"radio",name:"storageDeposit",value:k,onChange:x,disabled:I},f().createElement(tL.ToggleButton,{id:"esd-0",variant:"outline-success",value:0},"No Deposit"),f().createElement(tL.ToggleButton,{id:"esd-5000",variant:"outline-success",value:5e3},"0.05 NEAR (5Kb)"),f().createElement(tL.ToggleButton,{id:"esd-20000",variant:"outline-success",value:2e4},"0.2 NEAR (20Kb)"),f().createElement(tL.ToggleButton,{id:"esd-100000",variant:"outline-success",value:1e5},"1 NEAR (100Kb)")))),!H&&W&&P.data&&f().createElement("div",{className:"form-check form-switch"},f().createElement("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"dont-ask-for-widget",checked:L,onChange:e=>{D(e.target.checked)}}),f().createElement("label",{className:"form-check-label",htmlFor:"dont-ask-for-widget"},"Don't ask again for saving similar data by"," ",f().createElement("span",{className:"font-monospace"},W)))):U),f().createElement(e2().Footer,null,f().createElement("button",{className:"btn btn-success",disabled:!(null==P?void 0:P.data)||I||H,onClick:e=>{e.preventDefault(),X()}},I&&U," Save Data"),f().createElement("button",{className:"btn btn-secondary",onClick:G,disabled:I},"Close")))},tV=e=>{var t=eQ(e.networkId),r=e.data,n=e.children,i=e.onClick,o=e.onCommit,a=e.onCancel,s=e.disabled,l=e.widgetSrc,c=e.force,h=(0,e0._)(e,["data","children","onClick","onCommit","onCancel","disabled","widgetSrc","force"]),p=(0,d._)((0,u.useState)(null),2),g=p[0],y=p[1];return f().createElement(f().Fragment,null,f().createElement("button",(0,v._)((0,m._)({},h),{disabled:s||!r||!!g||!t,onClick:e=>{e.preventDefault(),y("function"==typeof r?r():r),i&&i()}}),!!g&&U,n),f().createElement(tG,{show:!!g,widgetSrc:l,data:g,force:c,onHide:()=>y(null),onCancel:a,onCommit:o}))},tK=require("react-bootstrap-typeahead"),tz=require("styled-components"),tW=s.n(tz),tX=require("elliptic"),tH=require("tweetnacl"),tY=require("iframe-resizer-react"),tZ=s.n(tY);function tQ(e){var t,r,n,i=e.className,o=e.id,a=e.style,s=e.src,l=e.srcDoc,c=e.title,h=e.message,p=e.onLoad,g=e.onMessage,y=e.iframeResizer,b={className:i,id:o,style:a,src:s,srcDoc:l,title:c},w=(0,d._)((0,u.useState)(!1),2),E=w[0],S=w[1],k=(0,d._)((0,u.useState)(void 0),2),x=k[0],_=k[1],I=f().useRef(),C="allow-scripts",N=(0,u.useCallback)(e=>{if(e.source===I.current.contentWindow)g&&g(e.data)},[I,g]),A=()=>{S(!0),p&&p()};if((0,u.useEffect)(()=>(window.addEventListener("message",N,!1),()=>{window.removeEventListener("message",N,!1)}),[N]),(0,u.useEffect)(()=>{if(I.current&&E&&!em(x,h)){if(_(ep(h)),y){I.current.sendMessage(h,"*");return}I.current.contentWindow.postMessage(h,"*")}},[h,I,E,x]),(0,u.useEffect)(()=>{S(!1)},[s,l]),y){;return f().createElement(tZ(),(0,v._)((0,m._)({},(t=(0,v._)((0,m._)({},b),{style:null!=a?a:{width:"1px",minWidth:"100%"},checkOrigin:!1}),n=["log","autoResize","bodyBackground","bodyMargin","bodyPadding","inPageLinks","heightCalculationMethod","maxHeight","maxWidth","minHeight","minWidth","minWidth","resizeFrom","scrolling","sizeHeight","sizeWidth","tolerance","widthCalculationMethod"],Object.keys(r="object"==typeof y?y:{}).forEach(e=>{n.includes(e)&&(t[e]=r[e])}),r.onResized&&(t.onResized=e=>{var t=e.height,n=e.width;r.onResized({height:t,width:n})}),t)),{forwardRef:I,sandbox:C,onLoad:A}))}return f().createElement("iframe",(0,v._)((0,m._)({},b),{ref:I,sandbox:C,onLoad:A}))}var t0=require("nanoid"),t1=require("lodash.clonedeep"),t2=s.n(t1),t4=require("acorn"),t6=require("acorn-jsx"),t3=s.n(t6),t5=f().createContext(null),t8=e=>{var t,r,n,i=(0,u.useContext)(t5),o=(0,d._)((null==i?void 0:i.useConnectWallet)?null==i?void 0:i.useConnectWallet():[{}],3),a=o[0],s=a.wallet,l=a.connecting,c=o[1],h=o[2];return f().createElement("button",{className:`btn ${e.className} ${l||s?"btn-outline-secondary":"btn-outline-primary"}`,disabled:(s?!h:!c)||l,onClick:()=>s?null==h?void 0:h(s):null==c?void 0:c()},l?null!==(t=e.connectingLabel)&&void 0!==t?t:"Connecting":s?null!==(r=e.disconnectLabel)&&void 0!==r?r:"Disconnect Web3 Wallet":null!==(n=e.connectLabel)&&void 0!==n?n:"Connect Web3 Wallet")},t7=require("dompurify"),t9=require("@radix-ui/react-accordion"),re=require("@radix-ui/react-alert-dialog"),rt=require("@radix-ui/react-aspect-ratio"),rr=require("@radix-ui/react-avatar"),rn=require("@radix-ui/react-checkbox"),ri=require("@radix-ui/react-collapsible"),ro=require("@radix-ui/react-context-menu"),ra=require("@radix-ui/react-dialog"),rs=require("@radix-ui/react-dropdown-menu"),rl=require("@radix-ui/react-hover-card"),rc=require("@radix-ui/react-label"),ru=require("@radix-ui/react-menubar"),rf=require("@radix-ui/react-navigation-menu"),rh=require("@radix-ui/react-popover"),rd=require("@radix-ui/react-progress"),rp=require("@radix-ui/react-radio-group"),rg=require("@radix-ui/react-scroll-area"),rm=require("@radix-ui/react-select"),rv=require("@radix-ui/react-separator"),ry=require("@radix-ui/react-slider"),rb=require("@radix-ui/react-switch"),rw=require("@radix-ui/react-tabs"),rE=require("@radix-ui/react-toast"),rS=require("@radix-ui/react-toggle"),rk=require("@radix-ui/react-toggle-group"),rx=require("@radix-ui/react-toolbar"),r_=require("@radix-ui/react-tooltip"),rI=s(764).Buffer,rC="state",rN=[Object.prototype,Function.prototype,Array.prototype,String.prototype,Number.prototype,Boolean.prototype],rA=new Set(rN);rN.forEach(Object.preventExtensions);var rO={Private:"private",Public:"public"},rB={h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,div:!0,span:!0,strong:!0,sub:!0,sup:!0,pre:!0,i:!0,b:!0,p:!0,input:!0,button:!0,fieldset:!0,ul:!0,ol:!0,li:!0,table:!0,tr:!0,th:!0,td:!0,thead:!0,tbody:!0,tfoot:!0,br:!1,hr:!1,img:!1,textarea:!0,select:!0,option:!0,label:!0,small:!0,svg:!0,animate:!1,animateMotion:!1,animateTransform:!1,defs:!0,circle:!0,clipPath:!0,ellipse:!0,g:!0,image:!1,line:!0,linearGradient:!0,marker:!0,mask:!0,mpath:!1,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,set:!1,stop:!1,symbol:!0,text:!0,textPath:!0,tspan:!0,use:!1,a:!0},rT={Accordion:t9,AlertDialog:re,AspectRatio:rt,Avatar:rr,Checkbox:rn,Collapsible:ri,ContextMenu:ro,Dialog:ra,DropdownMenu:rs,HoverCard:rl,Label:rc,Menubar:ru,NavigationMenu:rf,Popover:rh,Progress:rd,RadioGroup:rp,ScrollArea:rg,Select:rm,Separator:rv,Slider:ry,Switch:rb,Tabs:rw,Toast:rE,Toggle:rS,ToggleGroup:rk,Toolbar:rx,Tooltip:r_},rP=(0,m._)({},rB,{Widget:!1,CommitButton:!0,IpfsImageUpload:!1,Markdown:!1,Fragment:!0,InfiniteScroll:!0,Typeahead:!1,Tooltip:!0,OverlayTrigger:!0,Files:!0,iframe:!1,Web3Connect:!1}),rU={styled:!0},rR=ef(t2()({encodeURIComponent,decodeURIComponent,isNaN,parseInt,parseFloat,isFinite,btoa:e=>btoa(e),atob:e=>atob(e),decodeURI,encodeURI,nacl:{randomBytes:tH.randomBytes,secretbox:tH.secretbox,scalarMult:tH.scalarMult,box:tH.box,sign:tH.sign,hash:tH.hash,verify:tH.verify},ethers:{utils:(e=>(["checkProperties","deepCopy","defineReadOnly","getStatic","resolveProperties","shallowCopy"].forEach(t=>{delete e[t]}),e))(ep(k.ethers.utils)),BigNumber:k.ethers.BigNumber,Contract:k.ethers.Contract,providers:k.ethers.providers},nanoid:{nanoid:t0.nanoid,customAlphabet:t0.customAlphabet},Promise,Date,Number,String,Big:w(),Math,Buffer:rI,Audio,Image,File,Blob,FileReader,URL,Array,BN:_(),Uint8Array,Map,Set})),rj={[eh]:!0,constructor:!0,prototype:!0,__proto__:!0,__defineGetter__:!0,__defineSetter__:!0,__lookupGetter__:!0,__lookupSetter__:!0},rM={ecmaVersion:13,allowReturnOutsideFunction:!0},rq=new Map,rF=t4.Parser.extend(t3()()),rL=e=>{if(rq.has(e))return rq.get(e);var t=rF.parse(e,rM);return rq.set(e,t),t},rD=e=>{if(!0===rj[e])throw Error(`${e} is reserved and can't be used`)},r$=e=>{if(rA.has(e))throw Error("Native prototypes shouldn't be used")},rJ=e=>{if(r$(e),ed(e))throw Error("React objects shouldn't be dereferenced")},rG=e=>{rJ(e),null!==e&&"object"==typeof e&&Object.entries(e).forEach(e=>{var t=(0,d._)(e,2),r=t[0],n=t[1];rD(r),rG(n)})},rV=e=>{if(!!e&&"string"==typeof e){if(Object.keys(rT).includes(e.split(".")[0])){var t=e.split(".").reduce((e,t)=>e[t],rT);if(void 0===t)throw Error(`"${e}" is not a valid Radix component`);return t}}},rK=(e,t)=>e&&(null==t||"final"===t||"optimistic"===t),rz=e=>{if("Identifier"!==e.type)throw Error("Non identifier: "+e.type);var t=e.name;if(rD(t),rU.hasOwnProperty(t))throw Error("Cannot use keyword: "+t);return{type:"Identifier",name:t}},rW=e=>{if("JSXIdentifier"!==e.type)throw Error("Non JSXIdentifier: "+e.type);return e.name},rX=e=>{if("JSXIdentifier"===e.type)return e.name;if("JSXMemberExpression"===e.type)return rX(e.object)+"."+rW(e.property);throw Error("Non JSXIdentifier or JSXMemberExpression: "+e.type)},rH=e=>{if("Identifier"===e.type)return rz(e);if("ArrayPattern"===e.type)return{type:"ArrayPattern",elements:e.elements.map(rH)};if("ObjectPattern"===e.type)return{type:"ObjectPattern",properties:e.properties.map(e=>{if("Property"===e.type)return{key:rz(e.key),value:rH(e.value)};if("RestElement"===e.type)return{type:"RestElement",argument:rz(e.argument)};throw Error("Unknown property type: "+e.type)})};else if("RestElement"===e.type)return{type:"RestElement",argument:rz(e.argument)};else throw Error("Unknown pattern: "+e.type)},rY=["key","name","className","onChange","onError","accepts","multiple","clickable","maxFiles","maxFileSize","minFileSize","dragActiveClassName"],rZ=e=>{var t={};return rY.forEach(r=>{e.hasOwnProperty(r)&&(t[r]=e[r])}),t};class rQ{findObj(e){return this.state.hasOwnProperty(e)?this.state:this.prevStack?this.prevStack.findObj(e):void 0}get(e){return this.state.hasOwnProperty(e)?this.state[e]:this.prevStack?this.prevStack.get(e):void 0}constructor(e,t){this.prevStack=e,this.state=t}}class r0{newStack(e){return new r0(this.vm,this.stack,{},this.isTrusted||!!e)}executeExpression(e){var t=this.executeExpressionInternal(e);return r$(t),t}renderElement(e){var t,r,n,i,o,a,s,l,c,u="JSXFragment"===e.type?"Fragment":rX(e.openingElement.name),h=rP[u],p=null;void 0===h&&this.vm.near.config.customElements.hasOwnProperty(u)&&(h=!0,p=this.vm.near.config.customElements[u]);var g=rV(u),y=void 0===h&&this.executeExpression(e.openingElement.name);if(void 0===h&&!g){if(void 0===y)throw Error("Unknown element: "+u);if(!(0,tz.isStyledComponent)(y)&&"function"!=typeof y)throw Error("Unsupported component: "+u)}var b={},w={};"input"===u?b.className="form-control":"CommitButton"===u?b.className="btn btn-success":"button"===u?b.className="btn btn-primary":"IpfsImageUpload"===u&&(b.className="btn btn-outline-primary");var E={};("JSXFragment"===e.type?e.openingFragment:e.openingElement).attributes.forEach(e=>{if("JSXAttribute"===e.type){var t=rW(e.name);b[t]=null===e.value||this.executeExpression(e.value),("value"===t||"image"===t||"onChange"===t)&&(E[t]=e.value)}else if("JSXSpreadAttribute"===e.type){var r=this.executeExpression(e.argument);Object.assign(b,r)}else throw Error("Unknown attribute type: "+e.type)}),"forwardedRef"===b.ref&&(b=(0,m._)({},b,this.vm.forwardedProps)),Object.entries(E).forEach(e=>{var t=(0,d._)(e,2),r=t[0],n=t[1];if("value"!==r||"input"!==u||"text"!==b.type||"JSXExpressionContainer"!==n.type||"onChange"in E){if("image"===r&&"IpfsImageUpload"===u&&"JSXExpressionContainer"===n.type){var i=this.resolveMemberExpression(n.expression,{requireState:!0,left:!0}),o=i.obj,a=i.key;w.img=o[a],b.onChange=e=>{(null==e?void 0:e.length)>0?(o[a]={uploading:!0,cid:null},this.vm.setReactState(this.vm.state.state),Z(e[0]).then(e=>{if(!!this.vm.alive){var t=this.vm.vmStack.resolveMemberExpression(n.expression,{requireState:!0,left:!0});t.obj[t.key]={cid:e},this.vm.setReactState(this.vm.state.state)}})):(o[a]=null,this.vm.setReactState(this.vm.state.state))}}}else{var s=this.resolveMemberExpression(n.expression,{requireState:!0,left:!0}),l=s.obj,c=s.key;b.value=(null==l?void 0:l[c])||"",b.onChange=e=>{e.preventDefault(),l[c]=e.target.value,this.vm.setReactState(this.vm.state.state)}}}),b.key=null!==(n=b.key)&&void 0!==n?n:`${this.vm.widgetSrc}-${u}-${this.vm.gIndex}`,(null===(r=this.vm.near)||void 0===r?void 0:null===(t=r.features)||void 0===t?void 0:t.enableComponentSrcDataKey)==!0&&(b["data-component"]=null!==(i=b["data-component"])&&void 0!==i?i:this.vm.widgetSrc),delete b.dangerouslySetInnerHTML,delete b.is;var S=(0,tz.isStyledComponent)(y)&&(null==y?void 0:y.target)||u;if(b.as&&!rB[b.as]&&delete b.as,b.forwardedAs&&!rB[b.forwardedAs]&&delete b.forwardedAs,"img"===S)b.alt=null!==(o=b.alt)&&void 0!==o?o:"not defined";else if("a"===S||"use"===S)Object.entries(b).forEach(e=>{var t=(0,d._)(e,2),r=t[0],n=t[1];"href"===r.toLowerCase()&&(b[r]=L(n)&&(0,t7.isValidAttribute)("a","href",n)?n:"about:blank")});else if("set"===S){if("href"===b.attributeName||"xlink:href"===b.attributeName||"is"===b.attributeName)return f().createElement(f().Fragment,null)}else"Widget"===u?(b.depth=this.vm.depth+1,b.config=[b.config,...this.vm.widgetConfigs].filter(Boolean)):"CommitButton"===u&&(b.networkId=this.vm.networkId);if(!1===h&&e.children.length)throw Error("And element '"+u+"' contains children, but shouldn't");var k=e.children.map((e,t)=>(this.vm.gIndex=t,this.executeExpression(e)));if(p)return p((0,v._)((0,m._)({},b),{children:k}));if(y)return(0,tz.isStyledComponent)(y)?f().createElement(y,(0,m._)({},b),...k):y((0,m._)({children:k},b));if("Widget"===u)return f().createElement(r4,b);else if("CommitButton"===u)return f().createElement(tV,(0,v._)((0,m._)({},b),{widgetSrc:this.vm.widgetSrc}),k);else if("InfiniteScroll"===u)return f().createElement(tB(),b,k);else if("Tooltip"===u)return f().createElement(tL.Tooltip,b,k);else if("OverlayTrigger"===u)return f().createElement(tL.OverlayTrigger,b,k.filter(e=>!L(e)||!!e.trim())[0]);else if("Typeahead"===u)return f().createElement(tK.Typeahead,b);else if("Markdown"===u)return f().createElement(tu,b);else if("Fragment"===u){b["data-component"];var x=(0,e0._)(b,["data-component"]);return f().createElement(f().Fragment,x,k)}else if("IpfsImageUpload"===u)return f().createElement("div",{className:"d-inline-block",key:b.key},(null===(a=w.img)||void 0===a?void 0:a.cid)&&f().createElement("div",{className:"d-inline-block me-2 overflow-hidden align-middle",style:{width:"2.5em",height:"2.5em"}},f().createElement("img",{className:"rounded w-100 h-100",style:{objectFit:"cover"},src:Q(null===(s=w.img)||void 0===s?void 0:s.cid),alt:"upload preview"})),f().createElement(tA(),(0,m._)({multiple:!1,accepts:["image/*"],minFileSize:1,clickable:!0},rZ(b)),(null===(l=w.img)||void 0===l?void 0:l.uploading)?f().createElement(f().Fragment,null,U," Uploading"):(null===(c=w.img)||void 0===c?void 0:c.cid)?"Replace":"Upload an Image"));else if("Files"===u)return f().createElement(tA(),rZ(b),k);else if("iframe"===u)return f().createElement(tQ,b);else if("Web3Connect"===u)return f().createElement(t8,b);else if(g){if(u.includes("Portal"))throw Error(`Radix's "${u}" component is not allowed. This portal element is an optional Radix feature and isn't necessary for most use cases.`);var _=k;return Array.isArray(_)&&(1===(_=_.filter(e=>"string"!=typeof e||""!==e.trim())).length?_=_[0]:0===_.length&&(_=void 0)),f().createElement(g,b,_)}else if(!0===h)return f().createElement(u,(0,m._)({},b),...k);else if(!1===h)return f().createElement(u,(0,m._)({},b));else throw Error("Unsupported element: "+u)}resolveKey(e,t){var r=t||"Identifier"!==e.type&&"JSXIdentifier"!==e.type?this.executeExpression(e):e.name;return rD(r),r}resolveMemberExpression(e,t){if("Identifier"===e.type||"JSXIdentifier"===e.type){var r,n=e.name;if(rD(n),(null==t?void 0:t.requireState)&&n!==rC)throw Error(`The top object should be ${rC}`);var i=null!==(r=this.stack.findObj(n))&&void 0!==r?r:this.stack.state;if(rJ(i),i===this.stack.state&&rU.hasOwnProperty(n)){if(null==t?void 0:t.left)throw Error("Cannot assign to keyword '"+n+"'");return{obj:i,key:n,keyword:n}}if((null==t?void 0:t.left)&&(!i||!i.hasOwnProperty(n)))throw Error(`Accessing undeclared identifier '${e.name}'`);return{obj:i,key:n}}if("MemberExpression"===e.type||"JSXMemberExpression"===e.type){if((null===(o=e.object)||void 0===o?void 0:o.type)==="Identifier"||(null===(a=e.object)||void 0===a?void 0:a.type)==="JSXIdentifier"){var o,a,s=e.object.name;if(rU.hasOwnProperty(s)){if(!(null==t?void 0:t.callee))throw Error("Cannot dereference keyword '"+s+"' in non-call expression");return{obj:this.stack.state,key:this.resolveKey(e.property,e.computed),keyword:s}}}var l=this.executeExpression(e.object);return rJ(l),{obj:l,key:this.resolveKey(e.property,e.computed)}}throw Error("Unsupported member type: '"+e.type+"'")}getArray(e){var t=[];return e.forEach(e=>{"SpreadElement"===e.type?t.push(...this.executeExpression(e.argument)):t.push(this.executeExpression(e))}),t}executeExpressionInternal(e){if(!e)return null;var t=null==e?void 0:e.type;if("AssignmentExpression"===t){var r,n=this.resolveMemberExpression(e.left,{left:!0}),i=n.obj,o=n.key,a=this.executeExpression(e.right);if("="===e.operator)return i[o]=a;if("+="===e.operator)return i[o]+=a;else if("-="===e.operator)return i[o]-=a;else if("*="===e.operator)return i[o]*=a;else if("/="===e.operator)return i[o]/=a;else if("??="===e.operator)return null!==(r=i[o])&&void 0!==r?r:i[o]=a;else throw Error("Unknown AssignmentExpression operator '"+e.operator+"'")}if("ChainExpression"===t)return this.executeExpression(e.expression);if("MemberExpression"===t||"JSXMemberExpression"===t){var s=this.resolveMemberExpression(e),l=s.obj,c=s.key;return null==l?void 0:l[c]}else if("Identifier"===t||"JSXIdentifier"===t)return this.stack.get(e.name);else if("JSXExpressionContainer"===t)return this.executeExpression(e.expression);else if("TemplateLiteral"===t){for(var u=[],f=0;f<e.quasis.length;f++){var h=e.quasis[f];if("TemplateElement"!==h.type)throw Error("Unknown quasis type: "+h.type);u.push(h.value.cooked),!h.tail&&u.push(this.executeExpression(e.expressions[f]))}return u.join("")}else if("CallExpression"===t||"NewExpression"===t){var d=this.resolveMemberExpression(e.callee,{callee:!0}),p=d.obj,g=d.key,m=d.keyword,v=this.getArray(e.arguments);if(!m&&(null==p?void 0:p[g])instanceof Function){this.vm.currentVmStack=this;var y="NewExpression"===t?new p[g](...v):p[g](...v);return this.vm.currentVmStack=void 0,y}if(e.optional)return;throw Error(`"${g}" is not a function`)}else if("Literal"===t||"JSXText"===t)return e.value;else if("JSXElement"===t||"JSXFragment"===t)return this.renderElement(e);else if("JSXExpressionContainer"===t)return this.executeExpression(e.expression);else if("BinaryExpression"===t){var b=this.executeExpression(e.left),w=this.executeExpression(e.right);if("+"===e.operator)return b+w;if("-"===e.operator)return b-w;else if("%"===e.operator)return b%w;else if("*"===e.operator)return b*w;else if("/"===e.operator)return b/w;else if("<"===e.operator)return b<w;else if("|"===e.operator)return b|w;else if("&"===e.operator)return b&w;else if(">"===e.operator)return b>w;else if("<="===e.operator)return b<=w;else if(">="===e.operator)return b>=w;else if("==="===e.operator||"=="===e.operator)return b===w;else if("!=="===e.operator||"!="===e.operator)return b!==w;else if("in"===e.operator)return b in w;else throw Error("Unknown BinaryExpression operator '"+e.operator+"'")}else if("UnaryExpression"===t){if("delete"===e.operator){var E=this.resolveMemberExpression(e.argument,{left:!0}),S=E.obj,k=E.key;return null==S||delete S[k]}var x=this.executeExpression(e.argument);if("-"===e.operator)return-x;if("!"===e.operator)return!x;else if("typeof"===e.operator)return typeof x;else throw Error("Unknown UnaryExpression operator '"+e.operator+"'")}else if("LogicalExpression"===t){var _=this.executeExpression(e.left);if("||"===e.operator)return _||this.executeExpression(e.right);if("&&"===e.operator)return _&&this.executeExpression(e.right);else if("??"===e.operator)return null!=_?_:this.executeExpression(e.right);else throw Error("Unknown LogicalExpression operator '"+e.operator+"'")}else if("ConditionalExpression"===t)return this.executeExpression(e.test)?this.executeExpression(e.consequent):this.executeExpression(e.alternate);else if("UpdateExpression"===t){var I=this.resolveMemberExpression(e.argument,{left:!0}),C=I.obj,N=I.key;if("++"===e.operator)return e.prefix?++C[N]:C[N]++;if("--"===e.operator)return e.prefix?--C[N]:C[N]--;else throw Error("Unknown UpdateExpression operator '"+e.operator+"'")}else if("ObjectExpression"===t)return e.properties.reduce((e,t)=>{if("Property"===t.type)e[this.resolveKey(t.key,t.computed)]=this.executeExpression(t.value);else if("SpreadElement"===t.type){var r=this.executeExpression(t.argument);rJ(r),Object.assign(e,r)}else throw Error("Unknown property type: "+t.type);return e},{});else if("ArrayExpression"===t)return this.getArray(e.elements);else if("JSXEmptyExpression"===t)return null;else if("ArrowFunctionExpression"===t)return this.createFunction(e.params,e.body,e.expression);else if("TaggedTemplateExpression"===t){if("MemberExpression"===e.tag.type||"CallExpression"===e.tag.type){var A=this.resolveMemberExpression("MemberExpression"===e.tag.type?e.tag:e.tag.callee,{callee:!0}),O=A.key;if("styled"!==A.keyword)throw Error("TaggedTemplateExpression is only supported for `styled` components");if("CallExpression"===e.tag.type){var B,T,P,U=this.getArray(e.tag.arguments),R=null==U?void 0:U[0],j=rV(R),M=this.vm.near.config.customElements[R];if(!(0,tz.isStyledComponent)(R)&&!j&&!M)throw Error('styled() can only take `styled` components, Radix component names (EG: "Accordion.Trigger"), or a customElement name (EG: "Link")');B=tW()(null!==(P=null!=M?M:j)&&void 0!==P?P:R)}else{if("keyframes"===O)B=tz.keyframes;else if(rB.hasOwnProperty(O))B=tW()(O);else throw Error("Unsupported styled tag: "+O);T=O}}else throw Error("TaggedTemplateExpression is only supported for `styled` components");if("TemplateLiteral"!==e.quasi.type)throw Error("Unknown quasi type: "+e.quasi.type);var q=e.quasi.quasis.map(e=>{if("TemplateElement"!==e.type)throw Error("Unknown quasis type: "+e.type);return e.value.cooked}),F=0===e.quasi.expressions.length&&"CallExpression"!==e.tag.type,L=JSON.stringify([T,...q]);if(F&&this.vm.cachedStyledComponents.has(L))return this.vm.cachedStyledComponents.get(L);var D=e.quasi.expressions.map(e=>this.executeExpression(e));if(B instanceof Function){var $=B(q,...D);return F&&this.vm.cachedStyledComponents.set(L,$),$}throw Error("styled error")}else throw console.log(e),Error("Unknown expression type '"+t+"'")}createFunction(e,t,r){var n=this;return e=e.map(rH),function(){for(var i,o,a,s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];if(!!n.vm.alive){var u=!!((null==l?void 0:null===(i=l[0])||void 0===i?void 0:i.nativeEvent)instanceof Event&&(null==l?void 0:null===(o=l[0])||void 0===o?void 0:o.nativeEvent.isTrusted)),f=n.newStack(u);return e.forEach((e,t)=>{var r=void 0,n=null==l?void 0:l[t];if(void 0!==n)try{if((null==n?void 0:n.nativeEvent)instanceof Event){var i,o,a,s,c,u,h,d,p=n;(n=n.nativeEvent)._preventDefault=()=>p.preventDefault(),n._stopPropagation=()=>p.stopPropagation(),n._isDefaultPrevented=()=>p.isDefaultPrevented(),n._isPropagationStopped=()=>p.isPropagationStopped()}n instanceof Event?n=eg({target:n.target?eg({value:null===(i=n.target)||void 0===i?void 0:i.value,id:null===(o=n.target)||void 0===o?void 0:o.id,dataset:null===(a=n.target)||void 0===a?void 0:a.dataset,href:null===(s=n.target)||void 0===s?void 0:s.href,checked:null===(c=n.target)||void 0===c?void 0:c.checked}):void 0,data:n.data,code:n.code,key:n.key,ctrlKey:n.ctrlKey,altKey:n.altKey,shiftKey:n.shiftKey,metaKey:n.metaKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,screenX:n.screenX,screenY:n.screenY,touches:n.touches,preventDefault:null!==(u=n._preventDefault)&&void 0!==u?u:n.preventDefault,stopPropagation:null!==(h=n._stopPropagation)&&void 0!==h?h:n.stopPropagation,defaultPrevented:n.defaultPrevented,isDefaultPrevented:null!==(d=n._isDefaultPrevented)&&void 0!==d?d:()=>n.defaultPrevented,isPropagationStopped:n._isPropagationStopped}):n instanceof Error&&(n=eg({type:n.type,name:n.name,message:n.message})),r=ep(n)}catch(e){console.warn(e)}f.stackDeclare(e,r)}),r?f.executeExpression(t):null===(a=f.executeStatement(t))||void 0===a?void 0:a.result}}}stackDeclare(e,t){if("Identifier"===e.type)this.stack.state[e.name]=t;else if("ArrayPattern"===e.type)rJ(t),e.elements.forEach((e,r)=>{"RestElement"===e.type?this.stackDeclare(e.argument,t.slice(r)):this.stackDeclare(e,null==t?void 0:t[r])});else if("ObjectPattern"===e.type){rJ(t);var r=new Set;e.properties.forEach(e=>{if("RestElement"===e.type){var n={};F(t)&&(Object.assign(n,t),r.forEach(e=>delete n[e])),this.stackDeclare(e.argument,n)}else this.stackDeclare(e.value,null==t?void 0:t[e.key.name]),r.add(e.key.name)})}else throw Error("Unknown pattern type: "+e.type)}executeStatement(e){if(e&&"EmptyStatement"!==e.type){if("VariableDeclaration"===e.type)e.declarations.forEach(e=>{if("VariableDeclarator"===e.type)this.stackDeclare(rH(e.id),this.executeExpression(e.init));else throw Error("Unknown variable declaration type '"+e.type+"'")});else if("ReturnStatement"===e.type)return{result:this.executeExpression(e.argument)};else if("FunctionDeclaration"===e.type)this.stackDeclare(rz(e.id),this.createFunction(e.params,e.body,e.expression));else if("ExpressionStatement"===e.type)this.executeExpression(e.expression);else if("BlockStatement"===e.type||"Program"===e.type){for(var t=e.body,r=this.newStack(),n=0;n<t.length;n++){var i=r.executeStatement(t[n]);if(i)return i}}else if("ForStatement"===e.type){var o=this.newStack();for(o.executeStatement(e.init);this.vm.loopLimit-- >0&&(!e.test||o.executeExpression(e.test));){;var a=o.executeStatement(e.body);if(a){if(a.break)break;if(!a.continue)return a}o.executeExpression(e.update)}if(this.vm.loopLimit<=0)throw Error("Exceeded loop limit")}else if("ForOfStatement"===e.type){var s=this.newStack(),l=s.executeExpression(e.right);rJ(l);var c=!0,u=!1,f=void 0;try{for(var h,d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var g=(h=this,function(){var t=d.value;if(h.vm.loopLimit--<=0)throw Error("Exceeded loop limit");if("VariableDeclaration"===e.left.type){if(1!==e.left.declarations.length)throw Error("Invalid for-of statement");e.left.declarations.forEach(e=>{if("VariableDeclarator"===e.type)h.stackDeclare(rH(e.id),t);else throw Error("Unknown variable declaration type '"+e.type+"'")})}else{var r=h.resolveMemberExpression(e.left,{left:!0});r.obj[r.key]=t}var n=s.executeStatement(e.body);if(n){if(n.break)return"break";if(!n.continue)return{v:n}}}());if("object"===(0,tC._)(g))return g.v;if("break"===g)break}}catch(e){u=!0,f=e}finally{try{!c&&null!=p.return&&p.return()}finally{if(u)throw f}}}else if("WhileStatement"===e.type){for(var m=this.newStack();this.vm.loopLimit-- >0&&m.executeExpression(e.test);){;var v=m.executeStatement(e.body);if(v){if(v.break)break;if(!v.continue)return v}}if(this.vm.loopLimit<=0)throw Error("Exceeded loop limit")}else if("IfStatement"===e.type){var y=this.executeExpression(e.test),b=this.newStack(),w=y?b.executeStatement(e.consequent):b.executeStatement(e.alternate);if(w)return w}else if("BreakStatement"===e.type)return{break:!0};else if("ContinueStatement"===e.type)return{continue:!0};else if("ThrowStatement"===e.type)throw this.executeExpression(e.argument);else if("TryStatement"===e.type)try{var E=this.newStack().executeStatement(e.block);if(E)return E}catch(t){if(!this.vm.alive||!e.handler)return null;if("CatchClause"!==e.handler.type)throw Error("Unknown try statement handler type '"+e.handler.type+"'");var S=this.newStack();e.handler.param&&S.stackDeclare(rz(e.handler.param),ep(t instanceof Error?{name:null==t?void 0:t.name,message:null==t?void 0:t.message,toString:()=>t.toString()}:t));var k=S.executeStatement(e.handler.body);if(k)return k}finally{this.vm.alive&&this.newStack().executeStatement(e.finalizer)}else if("SwitchStatement"===e.type){var x=this.executeExpression(e.discriminant),_=this.newStack(),I=e.cases,C=!1,N=!0,A=!1,O=void 0;try{for(var B,T=I[Symbol.iterator]();!(N=(B=T.next()).done);N=!0){var P=B.value;if("SwitchCase"!==P.type)throw Error("Unknown switch case type '"+P.type+"'");if(!!C||null===P.test||_.executeExpression(P.test)===x){C=!0;var U=!1,R=!0,j=!1,M=void 0;try{for(var q,F=P.consequent[Symbol.iterator]();!(R=(q=F.next()).done);R=!0){var L=q.value,D=_.executeStatement(L);if(D){if(!D.break)return D;U=!0;break}}}catch(e){j=!0,M=e}finally{try{!R&&null!=F.return&&F.return()}finally{if(j)throw M}}if(U)break}}}catch(e){A=!0,O=e}finally{try{!N&&null!=T.return&&T.return()}finally{if(A)throw O}}}else throw Error("Unknown token type '"+e.type+"'")}else;return null}constructor(e,t,r,n){this.gIndex=0,this.hookIndex=0,this.vm=e,this.isTrusted=!!n,this.stack=new rQ(t,r)}}class r1{stop(){if(!!this.alive)this.alive=!1,this.timeouts.forEach(e=>clearTimeout(e)),this.intervals.forEach(e=>clearInterval(e)),this.websockets.forEach(e=>e.close()),this.vmInstances.forEach(e=>e.stop())}initGlobalFunctions(){var e=this,t={getr:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Missing argument 'keys' for Social.getr");return e.cachedSocialGet(r[0],!0,r[1],r[2],r[3])},get:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Missing argument 'keys' for Social.get");return e.cachedSocialGet(r[0],!1,r[1],r[2],r[3])},keys:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Missing argument 'keys' for Social.keys");return e.cachedSocialKeys(...r)},index:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<2)throw Error("Missing argument 'action' and 'key` for Social.index");return e.cachedIndex(...r)},set:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Missing argument 'data' for Social.set");return e.socialSet(r[0],r[1])}},r={stringify:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)throw Error("Missing argument 'obj' for JSON.stringify");return rJ(t[0]),JSON.stringify(t[0],t[1],t[2])},parse:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)throw Error("Missing argument 's' for JSON.parse");try{var n=JSON.parse(t[0]);return rG(n),n}catch(e){return null}}},n={init:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Missing argument 'initialState' for State.init");if(null===r[0]||"object"!=typeof r[0]||ed(r[0]))throw Error("'initialState' is not an object");if(void 0===e.state.state){var i=r[0];e.state.state=i,e.setReactState(i)}return e.state.state},update:function(){for(var t,r,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];if(F(i[0])?(e.state.state=null!==(t=e.state.state)&&void 0!==t?t:{},Object.assign(e.state.state,i[0])):i[0]instanceof Function&&(e.state.state=null!==(r=e.state.state)&&void 0!==r?r:{},e.state.state=i[0](e.state.state)),void 0===e.state.state)throw Error("The state was not initialized");return e.setReactState(e.state.state),e.state.state},get:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.state.state}},i=function(t){for(var r,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(!e.currentVmStack||(null===(r=e.currentVmStack)||void 0===r?void 0:r.prevStack))throw Error(`Method: ${t}. The hook can only be called from the top of the stack`);if(!e.hooks)throw Error("Hooks are unavailable for modules");var a="useMemo"===t,s=a?"factory":"callback";if(i.length<1)throw Error(`Method: ${t}. Required arguments: '${s}'. Optional: 'dependencies'`);var l=i[0];if(!D(l))throw Error(`Method: ${t}. The first argument '${s}' must be a function`);var c=e.currentVmStack.hookIndex++,u=i[1],f=e.hooks[c];if(f){var h=f.dependencies;if(void 0!==h&&em(h,u))return f.memoized}var d=a?l():l;return e.setReactHook(c,{memoized:d,dependencies:u}),d};return ef({socialGetr:t.getr,socialGet:t.get,Social:t,Near:{signMessage:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(1===r.length){if(F(r[0]))return e.near.signMessage(r[0]);throw Error("Method: Near.signMessage. Required argument: '{message, recipient, nonce, callbackUrl}'")}if(r.length<3)throw Error("Method: Near.signMessage. Required arguments: 'message', 'recipient', 'nonce'. Optional: 'callbackUrl'");var i=(0,d._)(r,4),o=i[0],a=i[1],s=i[2],l=i[3];return e.near.signMessage({message:o,recipient:a,nonce:s,callbackUrl:l})},view:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<2)throw Error("Method: Near.view. Required arguments: 'contractName', 'methodName'. Optional: 'args', 'blockId/finality', 'subscribe', 'cacheOptions'");var i=(0,d._)(r,6),o=i[0],a=i[1],s=i[2],l=i[3],c=i[4],u=i[5];return e.cachedNearView(o,a,s,l,rK(c,l),u)},asyncView:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<2)throw Error("Method: Near.asyncView. Required arguments: 'contractName', 'methodName'. Optional: 'args', 'blockId/finality'");return e.asyncNearView(...r)},block:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=(0,d._)(r,3),o=i[0],a=i[1],s=i[2];return e.cachedNearBlock(o,rK(a,o),s)},call:function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(1===n.length){if(F(n[0]))return e.confirmTransactions([n[0]]);if(q(n[0]))return e.confirmTransactions(n[0]);else throw Error("Method: Near.call. Required argument: 'tx/txs'. A single argument call requires an TX object or an array of TX objects.")}if(n.length<2||n.length>5)throw Error("Method: Near.call. Required argument: 'contractName'. If the first argument is a string: 'methodName'. Optional: 'args', 'gas' (defaults to 300Tg), 'deposit' (defaults to 0)");return e.confirmTransactions([{contractName:n[0],methodName:n[1],args:null!==(t=n[2])&&void 0!==t?t:{},gas:n[3],deposit:n[4]}])}},stringify:r.stringify,JSON:r,Object:{keys:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)throw Error("Missing argument 'obj' for Object.keys");return rJ(t[0]),Object.keys(t[0])},values:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)throw Error("Missing argument 'obj' for Object.values");return rJ(t[0]),Object.values(t[0])},entries:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)throw Error("Missing argument 'obj' for Object.entries");return rJ(t[0]),Object.entries(t[0])},assign:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(e=>rJ(e));var n=Object.assign(...t);return rG(n),n},fromEntries:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Object.fromEntries(t[0]);return rG(n),n}},initState:n.init,State:n,Storage:{privateSet:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<2)throw Error("Missing argument 'key' or 'value' for Storage.privateSet");return e.storageSet({src:e.widgetSrc,type:rO.Private},r[0],r[1])},privateGet:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Missing argument 'key' for Storage.privateGet");return e.storageGet({src:e.widgetSrc,type:rO.Private},r[0])},set:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<2)throw Error("Missing argument 'key' or 'value' for Storage.set");return e.storageSet({src:e.widgetSrc,type:rO.Public},r[0],r[1])},get:function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(n.length<1)throw Error("Missing argument 'key' for Storage.get. Optional argument: `widgetSrc`");return e.storageGet({src:null!==(t=n[1])&&void 0!==t?t:e.widgetSrc,type:rO.Public},n[0])}},console:{log:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return console.log(e.widgetSrc,...r)},warn:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return console.warn(e.widgetSrc,...r)},error:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return console.error(e.widgetSrc,...r)},info:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return console.info(e.widgetSrc,...r)}},clipboard:{writeText:function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return(null===(t=e.currentVmStack)||void 0===t?void 0:t.isTrusted)?navigator.clipboard.writeText(...n):Promise.reject(Error("Not trusted (not a click)"))}},VM:{require:this.vmRequire.bind(this)},Ethers:{provider:()=>this.ethersProvider,setChain:function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=null===(t=e.ethersProviderContext)||void 0===t?void 0:t.setChain;if(!o)throw Error("The gateway doesn't support `setChain` operation");return o(...n)},send:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.cachedEthersCall("send",r)}},WebSocket:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=new WebSocket(...r);return e.websockets.push(i),i},fetch:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Method: fetch. Required arguments: 'url'. Optional: 'options'");return e.cachedFetch(...r)},asyncFetch:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<1)throw Error("Method: asyncFetch. Required arguments: 'url'. Optional: 'options'");return e.asyncFetch(...r)},useCache:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length<2)throw Error("Method: useCache. Required arguments: 'promiseGenerator', 'dataKey'. Optional: 'options'");if(!D(r[0]))throw Error("Method: useCache. The first argument 'promiseGenerator' must be a function");return e.useCache(...r)},useState:function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(!e.currentVmStack||(null===(t=e.currentVmStack)||void 0===t?void 0:t.prevStack))throw Error("Method: useState. The hook can an only be called from the top of the stack");if(!e.hooks)throw Error("Hooks are unavailable for modules");if(n.length<1)throw Error("Method: useState. Required arguments: 'initialState'");var o=n[0],a=e.currentVmStack.hookIndex++,s=e.hooks[a];if(s)return[s.state,s.setState];var l=()=>{var t;return null===(t=e.hooks[a])||void 0===t?void 0:t.state},c=t=>(D(t)&&(t=t(l())),e.setReactHook(a,{state:t,setState:c}),t);return[c(o),c]},useEffect:function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(!e.currentVmStack||(null===(t=e.currentVmStack)||void 0===t?void 0:t.prevStack))throw Error("Method: useEffect. The hook can an only be called from the top of the stack");if(!e.hooks)throw Error("Hooks are unavailable for modules");if(n.length<1)throw Error("Method: useEffect. Required arguments: 'setup'. Optional: 'dependencies'");var o=n[0];if(!D(o))throw Error("Method: useEffect. The first argument 'setup' must be a function");var a=e.currentVmStack.hookIndex++,s=n[1],l=e.hooks[a];if(l){var c=l.dependencies;if(void 0!==c&&em(c,s))return}var u=null==l?void 0:l.cleanup;D(u)&&u(),e.setReactHook(a,{cleanup:o(),dependencies:s})},useMemo:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("useMemo",...t)},useCallback:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i("useCallback",...t)},setTimeout:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=(0,d._)(r,2),o=i[0],a=setTimeout(()=>{if(!!e.alive)o()},i[1]);return e.timeouts.add(a),a},setInterval:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(e.intervals.size>=16)throw Error("Too many intervals. Max allowed: 16");var i=(0,d._)(r,2),o=i[0],a=setInterval(()=>{if(!!e.alive)o()},i[1]);return e.intervals.add(a),a},clearTimeout:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];return e.timeouts.delete(i),clearTimeout(i)},clearInterval:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];return e.intervals.delete(i),clearInterval(i)}})}cachedPromise(e,t){return ep(e({onInvalidate:()=>{this.alive&&this.refreshCache()},subscribe:!!t}))}cachedSocialGet(e,t,r,n,i){return e=Array.isArray(e)?e:[e],this.cachedPromise(o=>this.cache.socialGet(this.near,e,t,r,n,o,i),null==n?void 0:n.subscribe)}storageGet(e,t){return this.cachedPromise(r=>this.cache.localStorageGet(e,t,r))}storageSet(e,t,r){return this.cache.localStorageSet(e,t,r)}cachedSocialKeys(e,t,r,n){return e=Array.isArray(e)?e:[e],this.cachedPromise(i=>this.cache.cachedViewCall(this.near,this.near.config.contractName,"keys",{keys:e,options:r},t,i,n),null==r?void 0:r.subscribe)}asyncNearView(e,t,r,n){return this.near.viewCall(e,t,r,n)}cachedEthersCall(e,t,r,n){return this.cachedPromise(r=>this.cache.cachedEthersCall(this.ethersProvider,e,t,r,n),r)}cachedNearView(e,t,r,n,i,o){return this.cachedPromise(i=>this.cache.cachedViewCall(this.near,e,t,r,n,i,o),i)}cachedNearBlock(e,t,r){return this.cachedPromise(t=>this.cache.cachedBlock(this.near,e,t,r),t)}asyncFetch(e,t){return this.cache.asyncFetch(e,t)}cachedFetch(e,t,r){return this.cachedPromise(n=>this.cache.cachedFetch(e,t,n,r),null==t?void 0:t.subscribe)}cachedIndex(e,t,r,n){return this.cachedPromise(i=>this.cache.socialIndex(this.near,e,t,r,i,n),null==r?void 0:r.subscribe)}useCache(e,t,r,n){return this.cachedPromise(r=>this.cache.cachedCustomPromise({widgetSrc:this.widgetSrc,dataKey:t},e,r,n),null==r?void 0:r.subscribe)}socialSet(e,t){return this.requestCommit({data:e,force:null==t?void 0:t.force,onCommit:null==t?void 0:t.onCommit,onCancel:null==t?void 0:t.onCancel})}vmRequire(e){var t,r=ev(e,null,this.widgetConfigs);if(null==r?void 0:r.src){var n=r.src,i=(0,d._)(n.split("@"),2),o=i[0],a=i[1];if(!(t=this.cachedSocialGet(o.toString(),!1,a,void 0)))return t}else(null==r?void 0:r.code)&&(t=r.code);return this.getVmInstance(t,null==r?void 0:r.src).execCode({context:ep(this.context),forwardedProps:this.forwardedProps})}getVmInstance(e,t){if(this.vmInstances.has(e)){var r=this.vmInstances.get(e);if(r.rawCode===e)return r;r.stop(),this.vmInstances.delete(e)}var n=new r1({near:this.near,rawCode:e,cache:this.cache,refreshCache:this.refreshCache,confirmTransactions:this.confirmTransactions,depth:this.depth+1,widgetSrc:t,requestCommit:this.requestCommit,version:this.version,widgetConfigs:this.widgetConfigs,ethersProviderContext:this.ethersProviderContext,isModule:!0});return this.vmInstances.set(e,n),n}renderCode(e){if(this.compileError){var t=this.compileError,r=t.message,n=t.stack;return this.near.config.errorCallback({scope:P.Compilation,message:r}),f().createElement("div",{className:"alert alert-danger"},"Compilation error:",f().createElement("pre",null,r),f().createElement("pre",null,n))}if(!this.alive){var i="VM is dead";return this.near.config.errorCallback({scope:P.Render,message:i}),f().createElement("div",{className:"alert alert-danger"},i)}var o=this.execCode(e);return ed(o)||"string"==typeof o||"number"==typeof o?o:f().createElement("pre",null,JSON.stringify(o,void 0,2))}execCode(e){var t=e.props,r=e.context,n=e.reactState,i=e.forwardedProps;if(this.compileError)throw this.compileError;if(this.depth>=32)return"Too deep";this.gIndex=0;var o=null!=n?n:{},a=o.hooks,s=o.state;this.hooks=a,this.state=(0,v._)((0,m._)({},rR,this.globalFunctions),{window:{location:{get hash(){return window.location.hash},set hash(value){if(""!==value)throw Error("Set `window.location.hash` only accepts an empty string as a value.");history.pushState(value,document.title,window.location.pathname+window.location.search)}}},props:F(t)?Object.assign({},t):t,context:r,state:s,get elliptic(){return delete this.elliptic,this.elliptic=t2()(tX),delete this.elliptic.utils.cachedProperty,this.elliptic}}),this.forwardedProps=i,this.loopLimit=1e6,this.vmStack=new r0(this,void 0,this.state);var l=this.vmStack.executeStatement(this.code);if(null==l?void 0:l.break)throw Error("BreakStatement outside of a loop");if(null==l?void 0:l.continue)throw Error("ContinueStatement outside of a loop");return null==l?void 0:l.result}constructor(e){var t,r=e.near,n=e.rawCode,i=e.setReactState,o=e.cache,a=e.refreshCache,s=e.confirmTransactions,l=e.depth,c=e.widgetSrc,u=e.requestCommit,f=e.version,h=e.widgetConfigs,d=e.ethersProviderContext,p=e.isModule;this.alive=!0,this.isModule=p,this.rawCode=n,this.near=r;try{this.code=rL(n),this.compileError=null}catch(e){this.code=null,this.compileError=e,console.error(e)}if(!this.code){this.alive=!1;return}this.setReactState=i?e=>i({hooks:this.hooks,state:F(e)?Object.assign({},e):e}):()=>{throw Error("State is unavailable for modules")},this.setReactHook=i?(e,t)=>{this.hooks[e]=t,i({hooks:this.hooks,state:this.state.state})}:()=>{throw Error("State is unavailable for modules")},this.cache=o,this.refreshCache=a,this.confirmTransactions=s,this.depth=null!=l?l:0,this.widgetSrc=c,this.requestCommit=u,this.version=f,this.cachedStyledComponents=new Map,this.widgetConfigs=h,this.ethersProviderContext=d,this.ethersProvider=(null==d?void 0:d.provider)?new k.ethers.providers.Web3Provider(d.provider):null,this.timeouts=new Set,this.intervals=new Set,this.websockets=[],this.vmInstances=new Map,this.networkId=(null===(t=h.findLast(e=>e&&e.networkId))||void 0===t?void 0:t.networkId)||r.config.networkId,this.globalFunctions=this.initGlobalFunctions()}}var r2=require("react-error-boundary"),r4=f().forwardRef((e,t)=>{var r,n=e.loading,i=e.src,o=e.code,a=e.depth,s=e.config,l=e.props,c=(0,e0._)(e,["loading","src","code","depth","config","props"]),h=(0,d._)((0,u.useState)(0),2),p=h[0],g=h[1],y=(0,d._)((0,u.useState)(null),2),b=y[0],E=y[1],S=(0,d._)((0,u.useState)(null),2),k=S[0],x=S[1],_=(0,d._)((0,u.useState)({hooks:[],state:void 0}),2),I=_[0],N=_[1],A=(0,d._)((0,u.useState)(0),2),O=A[0],B=A[1],T=(0,d._)((0,u.useState)({}),2),j=T[0],M=T[1],q=(0,d._)((0,u.useState)(null),2),F=q[0],L=q[1],D=(0,d._)((0,u.useState)(null),2),$=D[0],J=D[1],G=(0,d._)((0,u.useState)(null),2),V=G[0],K=G[1],z=(0,d._)((0,u.useState)(null),2),W=z[0],X=z[1],H=(0,d._)((0,u.useState)(null),2),Y=H[0],Z=H[1],Q=(0,d._)((0,u.useState)(null),2),ee=Q[0],et=Q[1],er=(0,u.useContext)(t5),en=Y&&(null===(r=Y.findLast(e=>e&&e.networkId))||void 0===r?void 0:r.networkId),ei=tw(en),eo=eJ(en),ea=eQ(en),es=(0,d._)((0,u.useState)(null),2),el=es[0],ec=es[1];(0,u.useEffect)(()=>{var e=s?Array.isArray(s)?s:[s]:[];!em(e,Y)&&Z(e)},[s,Y]),(0,u.useEffect)(()=>{var e=ev(i,o,Y);!em(e,ee)&&et(e)},[i,o,Y,ee]),(0,u.useEffect)(()=>{if(!!eo)if(null==ee?void 0:ee.src){var e,t=ee.src,r=(0,d._)(t.split("@"),2),n=r[0],o=r[1];E(ei.socialGet(eo,n.toString(),!1,o,void 0,()=>{g(p+1)})),x(t)}else(null==ee?void 0:ee.code)&&(E(ee.code),x((null==eo?void 0:null===(e=eo.features)||void 0===e?void 0:e.enableWidgetSrcWithCodeOverride)?i:null))},[eo,ee,p]),(0,u.useEffect)(()=>{L(null),ec(null),!b&&void 0===b&&(eo.config.errorCallback({scope:P.Source,message:k}),ec(f().createElement("div",{className:"alert alert-danger"},'Source code for "',k,'" is not found')))},[b,k]);var eu=(0,u.useCallback)(e=>{if(!eo||!e||0===e.length)return null;console.log("confirm txs",e=e.map(e=>({contractName:e.contractName,methodName:e.methodName,args:e.args||{},deposit:e.deposit?w()(e.deposit):w()(0),gas:e.gas?w()(e.gas):C.mul(30)}))),J(e)},[eo]),ef=(0,u.useCallback)(e=>{if(!eo)return null;console.log("commit requested",e),K(e)},[eo]);return(0,u.useEffect)(()=>{if(!!eo&&!!b){N({hooks:[],state:void 0});var e=new r1({near:eo,rawCode:b,setReactState:N,cache:ei,refreshCache:()=>{B(e=>e+1)},confirmTransactions:eu,depth:a,widgetSrc:k,requestCommit:ef,version:tS()(),widgetConfigs:Y,ethersProviderContext:er});return L(e),()=>{e.stop()}}},[k,eo,b,a,ef,eu,Y,er]),(0,u.useEffect)(()=>{if(!!eo)M({loading:!1,accountId:null!=ea?ea:null,widgetSrc:k,networkId:eo.config.networkId})},[eo,ea,k]),(0,u.useLayoutEffect)(()=>{if(!F)return;var e,r={props:l||{},context:j,reactState:I,cacheNonce:O,version:F.version,forwardedProps:(0,v._)((0,m._)({},c),{ref:t})};if(!em(r,W)){X(ep(r));try{ec(null!==(e=F.renderCode(r))&&void 0!==e?e:"Execution failed")}catch(e){var n=k?`${k}: ${e.message}`:e.message;eo.config.errorCallback({scope:P.Execution,message:n}),ec(f().createElement("div",{className:"alert alert-danger"},k?f().createElement(f().Fragment,null,"Src: ",k,f().createElement("br",null)):"","Execution error:",f().createElement("pre",null,e.message),f().createElement("pre",null,e.stack))),console.error(e)}}},[F,l,j,I,O,W,t,c]),null!=el?f().createElement(r2.ErrorBoundary,{FallbackComponent:e=>{eo.config.errorCallback({scope:P.Boundary,message:k});var t=e.error,r=void 0===t?{message:P.Boundary}:t;return f().createElement(R,{error:r})},onReset:()=>{ec(null)},resetKeys:[el]},f().createElement(f().Fragment,null,el,$&&f().createElement(tI,{transactions:$,widgetSrc:k,onHide:e=>{J(null),e&&e.transaction&&ei.invalidateCache(eo,e.transaction.receiver_id)},networkId:en}),V&&f().createElement(tG,{show:!0,widgetSrc:k,data:V.data,force:V.force,onHide:()=>K(null),onCommit:V.onCommit,onCancel:V.onCancel,networkId:en}))):null!=n?n:U});return l})());